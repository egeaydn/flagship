(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18545,(e,t,a)=>{t.exports=e.r(7284)},8643,e=>{"use strict";let t=null,a=()=>(t||(t=e.A(77861).then(e=>e.default)),t);e.s(["buttonRipple",0,e=>{let t=e.currentTarget,r=t.getBoundingClientRect(),s=e.clientX-r.left,n=e.clientY-r.top,o=document.createElement("span");o.style.cssText=`
    position: absolute;
    left: ${s}px;
    top: ${n}px;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: translate(-50%, -50%);
    pointer-events: none;
  `,t.style.position="relative",t.style.overflow="hidden",t.appendChild(o),a()?.then(e=>{e({targets:o,width:2*Math.max(r.width,r.height),height:2*Math.max(r.width,r.height),opacity:[.6,0],duration:600,easing:"easeOutQuad",complete:()=>o.remove()})})},"cardHover",0,e=>{a()?.then(t=>{t({targets:e,scale:1.05,translateY:-8,duration:300,easing:"easeOutCubic"})})},"cardHoverEnd",0,e=>{a()?.then(t=>{t({targets:e,scale:1,translateY:0,duration:300,easing:"easeOutCubic"})})},"fadeIn",0,(e,t=0)=>{a()?.then(a=>{a({targets:e,opacity:[0,1],translateY:[20,0],duration:800,delay:t,easing:"easeOutCubic"})})},"scaleIn",0,(e,t=0)=>{a()?.then(a=>{a({targets:e,opacity:[0,1],scale:[.8,1],duration:600,delay:t,easing:"easeOutElastic(1, .6)"})})},"slideInBottom",0,(e,t=0)=>{a()?.then(a=>{a({targets:e,opacity:[0,1],translateY:[100,0],duration:1e3,delay:t,easing:"easeOutExpo"})})},"staggerFadeIn",0,e=>{a()?.then(t=>{t({targets:e,opacity:[0,1],translateY:[30,0],duration:800,delay:t.stagger(100),easing:"easeOutCubic"})})}])},65267,e=>{"use strict";e.i(4937);var t=e.i(78361),a=e.i(16015);let r={ORGANIZATIONS:"organizations",ORGANIZATION_MEMBERS:"organization_members",PROJECTS:"projects",ENVIRONMENTS:"environments",FEATURE_FLAGS:"feature_flags",FLAG_VALUES:"flag_values",API_KEYS:"api_keys",AUDIT_LOGS:"audit_logs",FLAG_ANALYTICS:"flag_analytics"};async function s(e){let s=await (0,t.addDoc)((0,t.collection)(a.db,r.ORGANIZATIONS),{...e,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()});return await (0,t.setDoc)((0,t.doc)(a.db,r.ORGANIZATION_MEMBERS,`${e.createdBy}_${s.id}`),{organizationId:s.id,userId:e.createdBy,role:"owner",createdAt:(0,t.serverTimestamp)()}),s.id}async function n(e){let s=(0,t.query)((0,t.collection)(a.db,r.ORGANIZATION_MEMBERS),(0,t.where)("userId","==",e)),n=(await (0,t.getDocs)(s)).docs.map(e=>e.data().organizationId);if(0===n.length)return[];let o=(0,t.query)((0,t.collection)(a.db,r.ORGANIZATIONS),(0,t.where)("__name__","in",n));return(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()}))}async function o(e){let s=await (0,t.addDoc)((0,t.collection)(a.db,r.PROJECTS),{...e,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()});for(let e of[{name:"Development",key:"dev"},{name:"Staging",key:"staging"},{name:"Production",key:"prod"}])await (0,t.addDoc)((0,t.collection)(a.db,r.ENVIRONMENTS),{projectId:s.id,...e,createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()});return s.id}async function i(e){let s=await (0,t.addDoc)((0,t.collection)(a.db,r.FEATURE_FLAGS),{...e,tags:e.tags||[],createdAt:(0,t.serverTimestamp)(),updatedAt:(0,t.serverTimestamp)()}),n=(0,t.query)((0,t.collection)(a.db,r.ENVIRONMENTS),(0,t.where)("projectId","==",e.projectId));for(let o of(await (0,t.getDocs)(n)).docs)await (0,t.addDoc)((0,t.collection)(a.db,r.FLAG_VALUES),{flagId:s.id,environmentId:o.id,enabled:!1,value:e.defaultValue,updatedAt:(0,t.serverTimestamp)()});return s}async function l(s){let n=(await e.A(39007)).default,o=Array.from(crypto.getRandomValues(new Uint8Array(16))).map(e=>e.toString(16).padStart(2,"0")).join(""),i=`fsk_${s.keyType}_${o}`,l=await n.hash(i,10),c=i.substring(0,12);return await (0,t.addDoc)((0,t.collection)(a.db,r.API_KEYS),{environmentId:s.environmentId,name:s.name,keyPrefix:c,keyHash:l,keyType:s.keyType,revoked:!1,lastUsedAt:null,createdAt:(0,t.serverTimestamp)(),createdBy:s.createdBy}),i}async function c(e){let s=(0,t.doc)(a.db,r.API_KEYS,e);await (0,t.updateDoc)(s,{revoked:!0,updatedAt:(0,t.serverTimestamp)()})}async function d(e){let s=(0,t.query)((0,t.collection)(a.db,r.API_KEYS),(0,t.where)("environmentId","==",e),(0,t.where)("revoked","==",!1));return(await (0,t.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))}async function m(s){let n=await (0,t.addDoc)((0,t.collection)(a.db,r.AUDIT_LOGS),{...s,timestamp:(0,t.serverTimestamp)(),createdAt:(0,t.serverTimestamp)()});if(s.projectId&&s.action){let{triggerWebhooks:t}=await e.A(49847),a={FLAG_CREATED:"flag.created",FLAG_UPDATED:"flag.updated",FLAG_DELETED:"flag.deleted",FLAG_TOGGLED:"flag.toggled",TARGETING_RULES_UPDATED:"targeting.updated"}[s.action];a&&t(s.projectId,a,{flagKey:s.metadata?.flagKey||s.resourceName,flagName:s.resourceName,action:s.action,actor:s.userEmail||"Unknown",changes:s.changes,before:s.changes?.before,after:s.changes?.after}).catch(e=>console.error("Webhook trigger error:",e))}return n}async function u(e,s=100){let n=(0,t.query)((0,t.collection)(a.db,r.AUDIT_LOGS),(0,t.where)("organizationId","==",e));return(await (0,t.getDocs)(n)).docs.map(e=>({id:e.id,...e.data()})).sort((e,t)=>{let a=e.timestamp?.toMillis()||e.createdAt?.toMillis()||0;return(t.timestamp?.toMillis()||t.createdAt?.toMillis()||0)-a}).slice(0,s)}async function g(e,s,n=7){let o=(0,t.query)((0,t.collection)(a.db,r.FLAG_ANALYTICS),(0,t.where)("projectId","==",e),(0,t.where)("environmentId","==",s)),i=(await (0,t.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})),l=Date.now()-24*n*36e5;return i.filter(e=>(e.timestamp?.toMillis()||e.createdAt?.toMillis()||0)>=l)}async function p(e,t,a=7){let r=await g(e,t,a),s={};return r.forEach(e=>{let t=e.flagKey;s[t]||(s[t]={flagKey:t,flagId:e.flagId,evaluations:0,uniqueUsers:new Set,trueCount:0,falseCount:0,targetingAppliedCount:0}),s[t].evaluations++,e.userId&&s[t].uniqueUsers.add(e.userId),!0===e.result&&s[t].trueCount++,!1===e.result&&s[t].falseCount++,e.targetingApplied&&s[t].targetingAppliedCount++}),Object.values(s).map(e=>({...e,uniqueUsers:e.uniqueUsers.size}))}e.s(["COLLECTIONS",0,r,"createApiKey",()=>l,"createAuditLog",()=>m,"createFeatureFlag",()=>i,"createOrganization",()=>s,"createProject",()=>o,"getAggregatedAnalytics",()=>p,"getAuditLogs",()=>u,"getEnvironmentApiKeys",()=>d,"getUserOrganizations",()=>n,"revokeApiKey",()=>c])},55756,e=>{"use strict";var t=e.i(85434),a=e.i(78027);e.i(13893);var r=e.i(34708),s=e.i(16015),n=e.i(18545);e.i(4937);var o=e.i(78361),i=e.i(65267),l=e.i(8643);function c(){let e=(0,n.useParams)().slug,c=(0,n.useRouter)(),[d,m]=(0,a.useState)(null),[u,g]=(0,a.useState)(!0),[p,x]=(0,a.useState)(null),[h,f]=(0,a.useState)([]),[y,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)({name:"",key:"",description:""}),[N,w]=(0,a.useState)(!1),A=(0,a.useRef)(null),I=(0,a.useRef)(null),T=(0,a.useRef)(null);(0,a.useEffect)(()=>{p&&(document.title=`${p.name} | Flagship`)},[p]),(0,a.useEffect)(()=>{I.current&&(0,l.fadeIn)(I.current,0),A.current&&(0,l.slideInBottom)(A.current,200),T.current&&(0,l.fadeIn)(T.current,400),setTimeout(()=>{(0,l.staggerFadeIn)(".project-card")},600)},[]),(0,a.useEffect)(()=>{h.length>0&&setTimeout(()=>{(0,l.staggerFadeIn)(".project-card")},100)},[h]),(0,a.useEffect)(()=>{let t=(0,r.onAuthStateChanged)(s.auth,async t=>{t?(m(t),await E(e)):c.push("/login"),g(!1)});return()=>t()},[c,e]);let E=async e=>{try{let t=(0,o.query)((0,o.collection)(s.db,i.COLLECTIONS.ORGANIZATIONS),(0,o.where)("slug","==",e)),a=await (0,o.getDocs)(t);if(a.empty)c.push("/dashboard");else{let e={id:a.docs[0].id,...a.docs[0].data()};x(e),await k(e.id)}}catch(e){console.error("Error loading organization:",e)}},k=async e=>{try{let t=(0,o.query)((0,o.collection)(s.db,i.COLLECTIONS.PROJECTS),(0,o.where)("organizationId","==",e)),a=(await (0,o.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}));f(a)}catch(e){console.error("Error loading projects:",e)}},F=async e=>{if(e.preventDefault(),d&&p){w(!0);try{await (0,i.createProject)({organizationId:p.id,name:j.name,key:j.key,description:j.description,createdBy:d.uid}),v({name:"",key:"",description:""}),b(!1),await k(p.id)}catch(e){console.error("Error creating project:",e),alert("Hata: "+e.message)}finally{w(!1)}}};return((0,a.useEffect)(()=>{I.current&&(0,l.fadeIn)(I.current,0),A.current&&(0,l.slideInBottom)(A.current,200),T.current&&(0,l.slideInBottom)(T.current,400),document.querySelectorAll(".project-card").length>0&&(0,l.staggerFadeIn)(".project-card")},[]),(0,a.useEffect)(()=>{document.querySelectorAll(".project-card").length>0&&(0,l.staggerFadeIn)(".project-card")},[h]),u)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-600",children:"YÃ¼kleniyor..."})}):p?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,t.jsx)("nav",{ref:I,className:"bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[(0,t.jsxs)("button",{onClick:()=>c.push("/dashboard"),className:"flex items-center text-gray-600 hover:text-[#0066FF] transition-colors text-sm sm:text-base font-medium",children:[(0,t.jsx)("span",{className:"mr-2",children:"â†"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Dashboard"})]}),(0,t.jsx)("div",{className:"h-8 w-px bg-gray-300"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-[#0066FF] to-[#00B8D4] bg-clip-text text-transparent",children:p.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Organization"})]})]}),(0,t.jsx)("div",{className:"flex items-center space-x-3",children:(0,t.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-1.5 bg-gradient-to-r from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700",children:d?.email})]})})]})})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto py-8 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,t.jsxs)("div",{ref:A,className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Projects"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your feature flag projects"})]}),(0,t.jsx)("button",{onClick:()=>b(!y),className:"w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold text-sm sm:text-base transition-all duration-300 transform hover:scale-105",children:y?"âœ• Cancel":"+ New Project"})]}),y&&(0,t.jsx)("div",{className:"mb-8 animate-fadeIn",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Create New Project"}),(0,t.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("form",{onSubmit:F,className:"space-y-5",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project Name"}),(0,t.jsx)("input",{type:"text",required:!0,value:j.name,onChange:e=>{v({...j,name:e.target.value,key:e.target.value.toLowerCase().replace(/ÄŸ/g,"g").replace(/Ã¼/g,"u").replace(/ÅŸ/g,"s").replace(/Ä±/g,"i").replace(/Ã¶/g,"o").replace(/Ã§/g,"c").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")})},className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Mobile App"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project Key"}),(0,t.jsx)("input",{type:"text",required:!0,value:j.key,onChange:e=>v({...j,key:e.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900 font-mono text-sm",placeholder:"mobile-app"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),(0,t.jsx)("textarea",{value:j.description,onChange:e=>v({...j,description:e.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Describe your project...",rows:3})]}),(0,t.jsx)("button",{type:"submit",disabled:N,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg hover:shadow-green-500/40 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02]",children:N?(0,t.jsxs)("span",{className:"flex items-center justify-center",children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"âœ“ Create Project"})]})]})}),0===h.length?(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[(0,t.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-[#0066FF]/10 to-[#00B8D4]/10 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-4xl",children:"ðŸ“¦"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No projects yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first project to start managing feature flags"}),(0,t.jsxs)("button",{onClick:()=>b(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold transition-all duration-300 transform hover:scale-105",children:[(0,t.jsx)("span",{className:"mr-2",children:"+"}),"Create Your First Project"]})]}):(0,t.jsx)("div",{ref:T,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(a=>(0,t.jsxs)("div",{onClick:()=>c.push(`/dashboard/${e}/projects/${a.key}`),onMouseEnter:e=>(0,l.cardHover)(e.currentTarget),onMouseLeave:e=>(0,l.cardHoverEnd)(e.currentTarget),className:"project-card group bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-[#0066FF]/30 cursor-pointer",children:[(0,t.jsx)("div",{className:"h-2 bg-gradient-to-r from-[#0066FF] to-[#00B8D4]"}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-[#0066FF] transition-colors truncate mb-1",children:a.name}),(0,t.jsx)("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:a.key})]}),(0,t.jsx)("div",{className:"ml-3 flex-shrink-0 w-12 h-12 bg-gradient-to-br from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,t.jsx)("span",{className:"text-2xl",children:"ðŸš€"})})]}),a.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:a.createdAt?.toDate?.()?.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})||"New"}),(0,t.jsxs)("div",{className:"flex items-center text-[#0066FF] group-hover:translate-x-1 transition-transform",children:[(0,t.jsx)("span",{className:"text-sm font-medium mr-1",children:"Open"}),(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},a.id))})]})})]}):null}e.s(["default",()=>c])},39007,e=>{e.v(t=>Promise.all(["static/chunks/6b0a6e6e30d1308a.js"].map(t=>e.l(t))).then(()=>t(85123)))},49847,e=>{e.v(t=>Promise.all(["static/chunks/0f624e89cf31ab38.js"].map(t=>e.l(t))).then(()=>t(28750)))},77861,e=>{e.v(t=>Promise.all(["static/chunks/434ecb641055f33d.js"].map(t=>e.l(t))).then(()=>t(11615)))}]);