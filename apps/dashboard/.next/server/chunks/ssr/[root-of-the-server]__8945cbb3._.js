module.exports=[73804,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.AppRouterContext},97556,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.HooksClientContext},98950,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},40256,a=>{"use strict";var b=a.i(6559),c=a.i(33895),d=a.i(59283),e=a.i(71022);a.i(70853);var f=a.i(3837);function g(){let a=(0,d.useParams)().projectKey,[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)("all"),[m,n]=(0,c.useState)(!0);async function o(){try{let b;n(!0);let c=(0,f.query)((0,f.collection)(e.db,"projects"),(0,f.where)("key","==",a)),d=await (0,f.getDocs)(c);if(d.empty)return;let g=d.docs[0].id,i=(0,f.query)((0,f.collection)(e.db,"webhooks"),(0,f.where)("projectId","==",g)),l=(await (0,f.getDocs)(i)).docs.map(a=>({id:a.id,...a.data()}));if(h(l),b="all"===k?(0,f.query)((0,f.collection)(e.db,"webhook_deliveries"),(0,f.where)("webhookId","in",l.length>0?l.map(a=>a.id):["none"]),(0,f.orderBy)("createdAt","desc"),(0,f.limit)(100)):(0,f.query)((0,f.collection)(e.db,"webhook_deliveries"),(0,f.where)("webhookId","==",k),(0,f.orderBy)("createdAt","desc"),(0,f.limit)(100)),l.length>0){let a=(await (0,f.getDocs)(b)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate(),deliveredAt:a.data().deliveredAt?.toDate()}));j(a)}else j([])}catch(a){console.error("Error loading webhook logs:",a)}finally{n(!1)}}return((0,c.useEffect)(()=>{document.title="Webhook Logs | Flagship"},[]),(0,c.useEffect)(()=>{o()},[a,k]),m)?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-white p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Webhook Delivery Logs"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:"View webhook delivery history and status"})]}),(0,b.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"all",children:"All Webhooks"}),g.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),0===i.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No delivery logs"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Webhook deliveries will appear here when events are triggered."})]}):(0,b.jsx)("div",{className:"bg-white rounded-lg border overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Webhook"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attempts"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(a=>{var c;let d,e=g.find(b=>b.id===a.webhookId);return(0,b.jsxs)("tr",{children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.event})}),a.payload?.data?.flagKey&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.payload.data.flagKey})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-900",children:e?.name||"Unknown"})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(c=a.status,(d={success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[c]||d.pending)}`,children:a.status}),a.statusCode&&(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["HTTP ",a.statusCode]})]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.attemptCount}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.createdAt?.toLocaleString()}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,b.jsx)("button",{onClick:()=>{alert(a.error||a.response||JSON.stringify(a.payload,null,2))},className:"text-blue-600 hover:text-blue-900",children:"View"})})]},a.id)})})]})})})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8945cbb3._.js.map