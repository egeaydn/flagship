module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},73804,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.AppRouterContext},97556,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.HooksClientContext},98950,(a,b,c)=>{"use strict";b.exports=a.r(96086).vendored.contexts.ServerInsertedHtml},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},36470,a=>{"use strict";a.s(["buttonRipple",0,a=>{},"cardHover",0,a=>{},"cardHoverEnd",0,a=>{},"fadeIn",0,(a,b=0)=>{},"scaleIn",0,(a,b=0)=>{},"slideInBottom",0,(a,b=0)=>{},"staggerFadeIn",0,a=>{}])},72005,a=>{"use strict";a.i(70853);var b=a.i(3837),c=a.i(71022);let d={ORGANIZATIONS:"organizations",ORGANIZATION_MEMBERS:"organization_members",PROJECTS:"projects",ENVIRONMENTS:"environments",FEATURE_FLAGS:"feature_flags",FLAG_VALUES:"flag_values",API_KEYS:"api_keys",AUDIT_LOGS:"audit_logs",FLAG_ANALYTICS:"flag_analytics"};async function e(a){let e=await (0,b.addDoc)((0,b.collection)(c.db,d.ORGANIZATIONS),{...a,createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()});return await (0,b.setDoc)((0,b.doc)(c.db,d.ORGANIZATION_MEMBERS,`${a.createdBy}_${e.id}`),{organizationId:e.id,userId:a.createdBy,role:"owner",createdAt:(0,b.serverTimestamp)()}),e.id}async function f(a){let e=(0,b.query)((0,b.collection)(c.db,d.ORGANIZATION_MEMBERS),(0,b.where)("userId","==",a)),f=(await (0,b.getDocs)(e)).docs.map(a=>a.data().organizationId);if(0===f.length)return[];let g=(0,b.query)((0,b.collection)(c.db,d.ORGANIZATIONS),(0,b.where)("__name__","in",f));return(await (0,b.getDocs)(g)).docs.map(a=>({id:a.id,...a.data()}))}async function g(a){let e=await (0,b.addDoc)((0,b.collection)(c.db,d.PROJECTS),{...a,createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()});for(let a of[{name:"Development",key:"dev"},{name:"Staging",key:"staging"},{name:"Production",key:"prod"}])await (0,b.addDoc)((0,b.collection)(c.db,d.ENVIRONMENTS),{projectId:e.id,...a,createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()});return e.id}async function h(a){let e=await (0,b.addDoc)((0,b.collection)(c.db,d.FEATURE_FLAGS),{...a,tags:a.tags||[],createdAt:(0,b.serverTimestamp)(),updatedAt:(0,b.serverTimestamp)()}),f=(0,b.query)((0,b.collection)(c.db,d.ENVIRONMENTS),(0,b.where)("projectId","==",a.projectId));for(let g of(await (0,b.getDocs)(f)).docs)await (0,b.addDoc)((0,b.collection)(c.db,d.FLAG_VALUES),{flagId:e.id,environmentId:g.id,enabled:!1,value:a.defaultValue,updatedAt:(0,b.serverTimestamp)()});return e}async function i(e){let f=(await a.A(16912)).default,g=Array.from(crypto.getRandomValues(new Uint8Array(16))).map(a=>a.toString(16).padStart(2,"0")).join(""),h=`fsk_${e.keyType}_${g}`,i=await f.hash(h,10),j=h.substring(0,12);return await (0,b.addDoc)((0,b.collection)(c.db,d.API_KEYS),{environmentId:e.environmentId,name:e.name,keyPrefix:j,keyHash:i,keyType:e.keyType,revoked:!1,lastUsedAt:null,createdAt:(0,b.serverTimestamp)(),createdBy:e.createdBy}),h}async function j(a){let e=(0,b.doc)(c.db,d.API_KEYS,a);await (0,b.updateDoc)(e,{revoked:!0,updatedAt:(0,b.serverTimestamp)()})}async function k(a){let e=(0,b.query)((0,b.collection)(c.db,d.API_KEYS),(0,b.where)("environmentId","==",a),(0,b.where)("revoked","==",!1));return(await (0,b.getDocs)(e)).docs.map(a=>({id:a.id,...a.data()}))}async function l(e){let f=await (0,b.addDoc)((0,b.collection)(c.db,d.AUDIT_LOGS),{...e,timestamp:(0,b.serverTimestamp)(),createdAt:(0,b.serverTimestamp)()});if(e.projectId&&e.action){let{triggerWebhooks:b}=await a.A(54592),c={FLAG_CREATED:"flag.created",FLAG_UPDATED:"flag.updated",FLAG_DELETED:"flag.deleted",FLAG_TOGGLED:"flag.toggled",TARGETING_RULES_UPDATED:"targeting.updated"}[e.action];c&&b(e.projectId,c,{flagKey:e.metadata?.flagKey||e.resourceName,flagName:e.resourceName,action:e.action,actor:e.userEmail||"Unknown",changes:e.changes,before:e.changes?.before,after:e.changes?.after}).catch(a=>console.error("Webhook trigger error:",a))}return f}async function m(a,e=100){let f=(0,b.query)((0,b.collection)(c.db,d.AUDIT_LOGS),(0,b.where)("organizationId","==",a));return(await (0,b.getDocs)(f)).docs.map(a=>({id:a.id,...a.data()})).sort((a,b)=>{let c=a.timestamp?.toMillis()||a.createdAt?.toMillis()||0;return(b.timestamp?.toMillis()||b.createdAt?.toMillis()||0)-c}).slice(0,e)}async function n(a,e,f=7){let g=(0,b.query)((0,b.collection)(c.db,d.FLAG_ANALYTICS),(0,b.where)("projectId","==",a),(0,b.where)("environmentId","==",e)),h=(await (0,b.getDocs)(g)).docs.map(a=>({id:a.id,...a.data()})),i=Date.now()-24*f*36e5;return h.filter(a=>(a.timestamp?.toMillis()||a.createdAt?.toMillis()||0)>=i)}async function o(a,b,c=7){let d=await n(a,b,c),e={};return d.forEach(a=>{let b=a.flagKey;e[b]||(e[b]={flagKey:b,flagId:a.flagId,evaluations:0,uniqueUsers:new Set,trueCount:0,falseCount:0,targetingAppliedCount:0}),e[b].evaluations++,a.userId&&e[b].uniqueUsers.add(a.userId),!0===a.result&&e[b].trueCount++,!1===a.result&&e[b].falseCount++,a.targetingApplied&&e[b].targetingAppliedCount++}),Object.values(e).map(a=>({...a,uniqueUsers:a.uniqueUsers.size}))}a.s(["COLLECTIONS",0,d,"createApiKey",()=>i,"createAuditLog",()=>l,"createFeatureFlag",()=>h,"createOrganization",()=>e,"createProject",()=>g,"getAggregatedAnalytics",()=>o,"getAuditLogs",()=>m,"getEnvironmentApiKeys",()=>k,"getUserOrganizations",()=>f,"revokeApiKey",()=>j])},81720,a=>{"use strict";var b=a.i(6559),c=a.i(33895);a.i(89651);var d=a.i(83295),e=a.i(71022),f=a.i(59283);a.i(70853);var g=a.i(3837),h=a.i(72005),i=a.i(36470);function j(){let a=(0,f.useParams)().slug,j=(0,f.useRouter)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)({name:"",key:"",description:""}),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),z=(0,c.useRef)(null),A=(0,c.useRef)(null);(0,c.useEffect)(()=>{o&&(document.title=`${o.name} | Flagship`)},[o]),(0,c.useEffect)(()=>{z.current&&(0,i.fadeIn)(z.current,0),y.current&&(0,i.slideInBottom)(y.current,200),A.current&&(0,i.fadeIn)(A.current,400),setTimeout(()=>{(0,i.staggerFadeIn)(".project-card")},600)},[]),(0,c.useEffect)(()=>{q.length>0&&setTimeout(()=>{(0,i.staggerFadeIn)(".project-card")},100)},[q]),(0,c.useEffect)(()=>{let b=(0,d.onAuthStateChanged)(e.auth,async b=>{b?(l(b),await B(a)):j.push("/login"),n(!1)});return()=>b()},[j,a]);let B=async a=>{try{let b=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.ORGANIZATIONS),(0,g.where)("slug","==",a)),c=await (0,g.getDocs)(b);if(c.empty)j.push("/dashboard");else{let a={id:c.docs[0].id,...c.docs[0].data()};p(a),await C(a.id)}}catch(a){console.error("Error loading organization:",a)}},C=async a=>{try{let b=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.PROJECTS),(0,g.where)("organizationId","==",a)),c=(await (0,g.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}));r(c)}catch(a){console.error("Error loading projects:",a)}},D=async a=>{if(a.preventDefault(),k&&o){x(!0);try{await (0,h.createProject)({organizationId:o.id,name:u.name,key:u.key,description:u.description,createdBy:k.uid}),v({name:"",key:"",description:""}),t(!1),await C(o.id)}catch(a){console.error("Error creating project:",a),alert("Hata: "+a.message)}finally{x(!1)}}};return((0,c.useEffect)(()=>{z.current&&(0,i.fadeIn)(z.current,0),y.current&&(0,i.slideInBottom)(y.current,200),A.current&&(0,i.slideInBottom)(A.current,400),document.querySelectorAll(".project-card").length>0&&(0,i.staggerFadeIn)(".project-card")},[]),(0,c.useEffect)(()=>{document.querySelectorAll(".project-card").length>0&&(0,i.staggerFadeIn)(".project-card")},[q]),m)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-600",children:"YÃ¼kleniyor..."})}):o?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,b.jsx)("nav",{ref:z,className:"bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[(0,b.jsxs)("button",{onClick:()=>j.push("/dashboard"),className:"flex items-center text-gray-600 hover:text-[#0066FF] transition-colors text-sm sm:text-base font-medium",children:[(0,b.jsx)("span",{className:"mr-2",children:"â†"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Dashboard"})]}),(0,b.jsx)("div",{className:"h-8 w-px bg-gray-300"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-[#0066FF] to-[#00B8D4] bg-clip-text text-transparent",children:o.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Organization"})]})]}),(0,b.jsx)("div",{className:"flex items-center space-x-3",children:(0,b.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-1.5 bg-gradient-to-r from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700",children:k?.email})]})})]})})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto py-8 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,b.jsxs)("div",{ref:y,className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Projects"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your feature flag projects"})]}),(0,b.jsx)("button",{onClick:()=>t(!s),className:"w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold text-sm sm:text-base transition-all duration-300 transform hover:scale-105",children:s?"âœ• Cancel":"+ New Project"})]}),s&&(0,b.jsx)("div",{className:"mb-8 animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Create New Project"}),(0,b.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:D,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project Name"}),(0,b.jsx)("input",{type:"text",required:!0,value:u.name,onChange:a=>{v({...u,name:a.target.value,key:a.target.value.toLowerCase().replace(/ÄŸ/g,"g").replace(/Ã¼/g,"u").replace(/ÅŸ/g,"s").replace(/Ä±/g,"i").replace(/Ã¶/g,"o").replace(/Ã§/g,"c").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")})},className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Mobile App"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Project Key"}),(0,b.jsx)("input",{type:"text",required:!0,value:u.key,onChange:a=>v({...u,key:a.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900 font-mono text-sm",placeholder:"mobile-app"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),(0,b.jsx)("textarea",{value:u.description,onChange:a=>v({...u,description:a.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Describe your project...",rows:3})]}),(0,b.jsx)("button",{type:"submit",disabled:w,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg hover:shadow-green-500/40 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02]",children:w?(0,b.jsxs)("span",{className:"flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"âœ“ Create Project"})]})]})}),0===q.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-[#0066FF]/10 to-[#00B8D4]/10 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-4xl",children:"ðŸ“¦"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No projects yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first project to start managing feature flags"}),(0,b.jsxs)("button",{onClick:()=>t(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold transition-all duration-300 transform hover:scale-105",children:[(0,b.jsx)("span",{className:"mr-2",children:"+"}),"Create Your First Project"]})]}):(0,b.jsx)("div",{ref:A,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(c=>(0,b.jsxs)("div",{onClick:()=>j.push(`/dashboard/${a}/projects/${c.key}`),onMouseEnter:a=>(0,i.cardHover)(a.currentTarget),onMouseLeave:a=>(0,i.cardHoverEnd)(a.currentTarget),className:"project-card group bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-[#0066FF]/30 cursor-pointer",children:[(0,b.jsx)("div",{className:"h-2 bg-gradient-to-r from-[#0066FF] to-[#00B8D4]"}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-[#0066FF] transition-colors truncate mb-1",children:c.name}),(0,b.jsx)("code",{className:"text-xs font-mono text-gray-500 bg-gray-100 px-2 py-1 rounded",children:c.key})]}),(0,b.jsx)("div",{className:"ml-3 flex-shrink-0 w-12 h-12 bg-gradient-to-br from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸš€"})})]}),c.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:c.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500",children:c.createdAt?.toDate?.()?.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})||"New"}),(0,b.jsxs)("div",{className:"flex items-center text-[#0066FF] group-hover:translate-x-1 transition-transform",children:[(0,b.jsx)("span",{className:"text-sm font-medium mr-1",children:"Open"}),(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},c.id))})]})})]}):null}a.s(["default",()=>j])},16912,a=>{a.v(b=>Promise.all(["server/chunks/ssr/34e88_bcryptjs_index_ddcfd574.js"].map(b=>a.l(b))).then(()=>b(93638)))},54592,a=>{a.v(b=>Promise.all(["server/chunks/ssr/Desktop_Proje KlosÃ¶rÃ¼_React_flagship_160ce42f._.js"].map(b=>a.l(b))).then(()=>b(67581)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2b435657._.js.map