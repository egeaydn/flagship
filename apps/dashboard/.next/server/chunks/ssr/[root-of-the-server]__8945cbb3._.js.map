{"version":3,"sources":["../../../../../../../../../../Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../../../../../Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../../../../../Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../../../../../Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/apps/dashboard/app/dashboard/%5Bslug%5D/projects/%5BprojectKey%5D/webhooks/logs/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport { db } from '@/lib/firebase';\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  orderBy,\r\n  limit as firestoreLimit,\r\n} from 'firebase/firestore';\r\nimport { WebhookDelivery } from '@/lib/webhooks';\r\n\r\nexport default function WebhookLogsPage() {\r\n  const params = useParams();\r\n  const projectKey = params.projectKey as string;\r\n  \r\n  const [webhooks, setWebhooks] = useState<any[]>([]);\r\n  const [deliveries, setDeliveries] = useState<WebhookDelivery[]>([]);\r\n  const [selectedWebhook, setSelectedWebhook] = useState<string>('all');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    document.title = 'Webhook Logs | Flagship';\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadWebhooksAndDeliveries();\r\n  }, [projectKey, selectedWebhook]);\r\n\r\n  async function loadWebhooksAndDeliveries() {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Get project ID\r\n      const projectsQuery = query(\r\n        collection(db, 'projects'),\r\n        where('key', '==', projectKey)\r\n      );\r\n      const projectSnapshot = await getDocs(projectsQuery);\r\n      \r\n      if (projectSnapshot.empty) return;\r\n      \r\n      const projectId = projectSnapshot.docs[0].id;\r\n      \r\n      // Get webhooks\r\n      const webhooksQuery = query(\r\n        collection(db, 'webhooks'),\r\n        where('projectId', '==', projectId)\r\n      );\r\n      const webhooksSnapshot = await getDocs(webhooksQuery);\r\n      const webhooksData = webhooksSnapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n      setWebhooks(webhooksData);\r\n      \r\n      // Get deliveries\r\n      let deliveriesQuery;\r\n      if (selectedWebhook === 'all') {\r\n        deliveriesQuery = query(\r\n          collection(db, 'webhook_deliveries'),\r\n          where('webhookId', 'in', webhooksData.length > 0 ? webhooksData.map(w => w.id) : ['none']),\r\n          orderBy('createdAt', 'desc'),\r\n          firestoreLimit(100)\r\n        );\r\n      } else {\r\n        deliveriesQuery = query(\r\n          collection(db, 'webhook_deliveries'),\r\n          where('webhookId', '==', selectedWebhook),\r\n          orderBy('createdAt', 'desc'),\r\n          firestoreLimit(100)\r\n        );\r\n      }\r\n      \r\n      if (webhooksData.length > 0) {\r\n        const deliveriesSnapshot = await getDocs(deliveriesQuery);\r\n        const deliveriesData = deliveriesSnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          createdAt: doc.data().createdAt?.toDate(),\r\n          deliveredAt: doc.data().deliveredAt?.toDate(),\r\n        })) as WebhookDelivery[];\r\n        setDeliveries(deliveriesData);\r\n      } else {\r\n        setDeliveries([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading webhook logs:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function getStatusBadge(status: string) {\r\n    const styles = {\r\n      success: 'bg-green-100 text-green-800',\r\n      failed: 'bg-red-100 text-red-800',\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n    };\r\n    return styles[status as keyof typeof styles] || styles.pending;\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"animate-pulse space-y-4\">\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\r\n          <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900\">Webhook Delivery Logs</h1>\r\n            <p className=\"text-gray-600 mt-1\">\r\n              View webhook delivery history and status\r\n            </p>\r\n          </div>\r\n          \r\n          <select\r\n            value={selectedWebhook}\r\n            onChange={e => setSelectedWebhook(e.target.value)}\r\n            className=\"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"all\">All Webhooks</option>\r\n            {webhooks.map(webhook => (\r\n              <option key={webhook.id} value={webhook.id}>\r\n                {webhook.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n      {deliveries.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-white rounded-lg border\">\r\n          <svg\r\n            className=\"mx-auto h-12 w-12 text-gray-400\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n            />\r\n          </svg>\r\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No delivery logs</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            Webhook deliveries will appear here when events are triggered.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-lg border overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Event\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Webhook\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Attempts\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Timestamp\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Details\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {deliveries.map(delivery => {\r\n                  const webhook = webhooks.find(w => w.id === delivery.webhookId);\r\n                  return (\r\n                    <tr key={delivery.id}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <span className=\"text-sm font-medium text-gray-900\">\r\n                            {delivery.event}\r\n                          </span>\r\n                        </div>\r\n                        {delivery.payload?.data?.flagKey && (\r\n                          <div className=\"text-sm text-gray-500\">\r\n                            {delivery.payload.data.flagKey}\r\n                          </div>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">\r\n                          {webhook?.name || 'Unknown'}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span\r\n                          className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusBadge(\r\n                            delivery.status\r\n                          )}`}\r\n                        >\r\n                          {delivery.status}\r\n                        </span>\r\n                        {delivery.statusCode && (\r\n                          <span className=\"ml-2 text-xs text-gray-500\">\r\n                            HTTP {delivery.statusCode}\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {delivery.attemptCount}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {delivery.createdAt?.toLocaleString()}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\r\n                        <button\r\n                          onClick={() => {\r\n                            alert(\r\n                              delivery.error ||\r\n                                delivery.response ||\r\n                                JSON.stringify(delivery.payload, null, 2)\r\n                            );\r\n                          }}\r\n                          className=\"text-blue-600 hover:text-blue-900\"\r\n                        >\r\n                          View\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}