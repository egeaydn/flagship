module.exports=[12773,a=>{"use strict";var b=a.i(6559),c=a.i(33895);a.i(89651);var d=a.i(83295),e=a.i(71022),f=a.i(59283);a.i(70853);var g=a.i(3837),h=a.i(72005),i=a.i(13597),j=a.i(3982);function k({user:a,organization:g,project:h}){let i=(0,f.useRouter)(),k=(0,f.usePathname)(),[l,m]=(0,c.useState)(!1),n=async()=>{try{await (0,d.signOut)(e.auth),i.push("/login")}catch(a){console.error("Logout error:",a)}},o=a=>k?.includes(a),p=h&&g?[{name:"Feature Flags",icon:"ðŸš©",href:`/dashboard/${g.slug}/projects/${h.key}`,active:k===`/dashboard/${g.slug}/projects/${h.key}`},{name:"Analytics",icon:"ðŸ“Š",href:`/dashboard/${g.slug}/projects/${h.key}/analytics`,active:o("/analytics")},{name:"Webhooks",icon:"ðŸª",href:`/dashboard/${g.slug}/projects/${h.key}/webhooks`,active:o("/webhooks")},{name:"API Keys",icon:"ðŸ”‘",href:`/dashboard/${g.slug}/projects/${h.key}/api-keys`,active:o("/api-keys")},{name:"Audit Logs",icon:"ðŸ“‹",href:`/dashboard/${g.slug}/audit-logs`,active:o("/audit-logs")}]:g?[{name:"Projects",icon:"ðŸ“¦",href:`/dashboard/${g.slug}`,active:k===`/dashboard/${g.slug}`},{name:"Audit Logs",icon:"ðŸ“‹",href:`/dashboard/${g.slug}/audit-logs`,active:o("/audit-logs")}]:[{name:"Organizations",icon:"ðŸ¢",href:"/dashboard",active:"/dashboard"===k}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("nav",{className:"bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("button",{onClick:()=>m(!l),className:"lg:hidden p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,b.jsxs)(j.default,{href:"/dashboard",className:"flex items-center space-x-2 group",children:[(0,b.jsx)("img",{src:"/FlagShip-logo-transparent.png",alt:"Flagship Logo",className:"w-14 h-14 object-contain group-hover:scale-110 transition-transform"}),(0,b.jsx)("div",{className:"hidden sm:block",children:(0,b.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-[#0066FF] to-[#00B8D4] bg-clip-text text-transparent",children:"Flagship"})})]}),(0,b.jsxs)("div",{className:"hidden md:flex items-center space-x-2 text-sm",children:[g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"/"}),(0,b.jsx)(j.default,{href:`/dashboard/${g.slug}`,className:"text-gray-600 hover:text-[#0066FF] transition-colors font-medium truncate max-w-[150px]",children:g.name})]}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"/"}),(0,b.jsx)(j.default,{href:`/dashboard/${g?.slug}/projects/${h.key}`,className:"text-gray-600 hover:text-[#0066FF] transition-colors font-medium truncate max-w-[150px]",children:h.name})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 px-3 py-1.5 bg-gradient-to-r from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate max-w-[150px]",children:a?.email})]}),(0,b.jsxs)("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 hover:shadow-lg hover:shadow-red-500/40 rounded-lg transition-all duration-300",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"}),(0,b.jsx)("span",{className:"sm:hidden",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})})}),l&&(0,b.jsx)("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/50 backdrop-blur-sm",onClick:()=>m(!1),children:(0,b.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 bg-white shadow-xl p-6 animate-fadeIn",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Navigation"}),(0,b.jsx)("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("nav",{className:"space-y-2",children:p.map(a=>(0,b.jsxs)(j.default,{href:a.href,onClick:()=>m(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ${a.active?"bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white shadow-lg":"text-gray-700 hover:bg-gray-100"}`,children:[(0,b.jsx)("span",{className:"text-xl",children:a.icon}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]},a.name))})]})}),p.length>1&&(0,b.jsx)("div",{className:"hidden lg:block bg-white border-b border-gray-200 sticky top-16 z-40",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsx)("nav",{className:"flex space-x-1 py-3",children:p.map(a=>(0,b.jsxs)(j.default,{href:a.href,className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all font-medium text-sm ${a.active?"bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[(0,b.jsx)("span",{children:a.icon}),(0,b.jsx)("span",{children:a.name})]},a.name))})})})]})}var l=a.i(36470);function m(){let a=(0,f.useParams)(),j=a.slug,m=a.projectKey,n=(0,f.useRouter)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)([]),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)({name:"",key:"",description:"",flagType:"boolean",defaultValue:!1}),[K,L]=(0,c.useState)(!1),M=(0,c.useRef)(null),N=(0,c.useRef)(null);(0,c.useEffect)(()=>{s&&(document.title=`${s.name} | Flagship`)},[s]),(0,c.useEffect)(()=>{let a=(0,d.onAuthStateChanged)(e.auth,async a=>{a?(p(a),await O()):n.push("/login"),r(!1)});return()=>a()},[n,m]);let O=async()=>{try{let a=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.PROJECTS),(0,g.where)("key","==",m)),b=await (0,g.getDocs)(a);if(b.empty)n.push(`/dashboard/${j}`);else{let a={id:b.docs[0].id,...b.docs[0].data()};t(a);let c=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.ORGANIZATIONS),(0,g.where)("slug","==",j)),d=await (0,g.getDocs)(c);d.empty||v({id:d.docs[0].id,...d.docs[0].data()}),await P(a.id),await Q(a.id)}}catch(a){console.error("Error loading project:",a)}},P=async a=>{try{let b=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.ENVIRONMENTS),(0,g.where)("projectId","==",a)),c=(await (0,g.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}));x(c),c.length>0&&z(c[0].id)}catch(a){console.error("Error loading environments:",a)}},Q=async a=>{try{let b=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.FEATURE_FLAGS),(0,g.where)("projectId","==",a)),c=(await (0,g.getDocs)(b)).docs.map(a=>({id:a.id,...a.data()}));B(c);let d=(0,g.query)((0,g.collection)(e.db,h.COLLECTIONS.FLAG_VALUES)),f=(await (0,g.getDocs)(d)).docs.map(a=>({id:a.id,...a.data()}));D(f)}catch(a){console.error("Error loading flags:",a)}},R=async a=>{if(a.preventDefault(),o&&s){L(!0);try{await (0,h.createFeatureFlag)({projectId:s.id,name:I.name,key:I.key,description:I.description,flagType:I.flagType,defaultValue:I.defaultValue,createdBy:o.uid}),i.default.success(`âœ… Flag "${I.name}" created successfully!`),J({name:"",key:"",description:"",flagType:"boolean",defaultValue:!1}),F(!1),await Q(s.id)}catch(a){console.error("Error creating flag:",a),i.default.error(`âŒ Failed to create flag: ${a.message}`)}finally{L(!1)}}};(0,c.useEffect)(()=>{M.current&&(0,l.fadeIn)(M.current,0),N.current&&(0,l.slideInBottom)(N.current,200)},[]),(0,c.useEffect)(()=>{document.querySelectorAll(".flag-card").length>0&&(0,l.staggerFadeIn)(".flag-card")},[A]);let S=async(a,b)=>{if(y&&o&&s){H(a);try{let c=C.find(b=>b.flagId===a&&b.environmentId===y),d=A.find(b=>b.id===a),f=!b;c&&d&&(await (0,g.updateDoc)((0,g.doc)(e.db,h.COLLECTIONS.FLAG_VALUES,c.id),{enabled:f,updatedAt:new Date}),await (0,h.createAuditLog)({organizationId:s.organizationId,projectId:s.id,environmentId:y,userId:o.uid,userEmail:o.email||"unknown",action:f?"FLAG_ENABLED":"FLAG_DISABLED",resourceType:"flag",resourceId:a,resourceName:d.name,changes:{before:{enabled:b},after:{enabled:f}}})),i.default.success(`${f?"âœ… Flag enabled":"â¸ï¸ Flag disabled"}`),await Q(s.id)}catch(a){console.error("Error toggling flag:",a),i.default.error("âŒ Failed to toggle flag")}finally{H(null)}}};return q?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-gray-600",children:"YÃ¼kleniyor..."})}):s?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,b.jsx)(k,{user:o,organization:u?{name:u.name,slug:u.slug}:void 0,project:s?{name:s.name,key:s.key}:void 0}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto py-8 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Environment"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map(a=>(0,b.jsx)("button",{onClick:()=>z(a.id),className:`px-4 sm:px-6 py-2.5 rounded-full font-medium text-sm transition-all duration-200 ${y===a.id?"bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white shadow-lg shadow-[#0066FF]/30":"bg-white text-gray-700 border-2 border-gray-200 hover:border-[#0066FF]/30 hover:shadow-md"}`,children:a.name},a.id))})]}),(0,b.jsxs)("div",{ref:M,className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Feature Flags"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Manage and control your feature flags"})]}),(0,b.jsx)("button",{onClick:()=>F(!E),className:"w-full sm:w-auto px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold text-sm sm:text-base transition-all duration-300 transform hover:scale-105",children:E?"âœ• Cancel":"+ New Flag"})]}),E&&(0,b.jsx)("div",{className:"mb-8 animate-fadeIn",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6 sm:p-8 border border-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Create New Feature Flag"}),(0,b.jsx)("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:R,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Flag Name"}),(0,b.jsx)("input",{type:"text",required:!0,value:I.name,onChange:a=>{J({...I,name:a.target.value,key:a.target.value.toLowerCase().replace(/ÄŸ/g,"g").replace(/Ã¼/g,"u").replace(/ÅŸ/g,"s").replace(/Ä±/g,"i").replace(/Ã¶/g,"o").replace(/Ã§/g,"c").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")})},className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Dark Mode"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Flag Key"}),(0,b.jsx)("input",{type:"text",required:!0,value:I.key,onChange:a=>J({...I,key:a.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900 font-mono text-sm",placeholder:"dark-mode"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:I.description,onChange:a=>J({...I,description:a.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",placeholder:"Describe what this flag controls...",rows:3})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Flag Type"}),(0,b.jsxs)("select",{value:I.flagType,onChange:a=>J({...I,flagType:a.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900",children:[(0,b.jsx)("option",{value:"boolean",children:"Boolean (true/false)"}),(0,b.jsx)("option",{value:"number",children:"Number"}),(0,b.jsx)("option",{value:"json",children:"JSON"}),(0,b.jsx)("option",{value:"multivariate",children:"Multivariate"})]})]}),(0,b.jsx)("button",{type:"submit",disabled:K,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:shadow-lg hover:shadow-green-500/40 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02]",children:K?(0,b.jsxs)("span",{className:"flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"âœ“ Create Flag"})]})]})}),0===A.length?(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[(0,b.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-[#0066FF]/10 to-[#00B8D4]/10 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-4xl",children:"ðŸš©"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No feature flags yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first feature flag"}),(0,b.jsxs)("button",{onClick:()=>F(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold transition-all duration-300 transform hover:scale-105",children:[(0,b.jsx)("span",{className:"mr-2",children:"+"}),"Create Your First Flag"]})]}):(0,b.jsx)("div",{ref:N,className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:A.map(c=>{let d,e=(d=c.id,C.find(a=>a.flagId===d&&a.environmentId===y)),f=e?.enabled||!1;return(0,b.jsxs)("div",{className:"flag-card group bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 hover:border-[#0066FF]/30 cursor-pointer",onMouseEnter:a=>(0,l.cardHover)(a.currentTarget),onMouseLeave:a=>(0,l.cardHoverEnd)(a.currentTarget),children:[(0,b.jsxs)("div",{onClick:()=>n.push(`/dashboard/${a.slug}/projects/${a.projectKey}/flags/${c.key}`),className:"p-6 pb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-[#0066FF] transition-colors truncate mb-1",children:c.name}),c.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:c.description})]}),(0,b.jsx)("span",{className:`ml-3 px-3 py-1 rounded-full text-xs font-semibold ${f?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:f?"â— Active":"â—‹ Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,b.jsx)("code",{className:"text-xs font-mono text-gray-600 bg-gray-100 px-3 py-1.5 rounded-lg border border-gray-200",children:c.key}),(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded",children:c.flagType})]})]}),(0,b.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:G===c.id?"Updating...":"Toggle Flag"}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),S(c.id,f)},disabled:G===c.id,className:`relative inline-flex h-7 w-14 items-center rounded-full transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${f?"bg-gradient-to-r from-green-500 to-green-600 shadow-lg shadow-green-500/30":"bg-gray-300"}`,children:G===c.id?(0,b.jsx)("span",{className:"inline-block h-5 w-5 rounded-full bg-white animate-pulse mx-auto"}):(0,b.jsx)("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-md ${f?"translate-x-8":"translate-x-1"}`})})]})]},c.id)})})]})})]}):null}a.s(["default",()=>m],12773)}];

//# sourceMappingURL=32c03_apps_dashboard_app_dashboard_%5Bslug%5D_projects_%5BprojectKey%5D_page_tsx_bbad1468._.js.map