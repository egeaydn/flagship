{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n};\r\n\r\n// Initialize Firebase (singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\n\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport default app;\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,kMAAO,IAAG,MAAM,KAAK,IAAI,IAAA,wMAAa,EAAC,kBAAkB,IAAA,kMAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,OAAO,IAAA,oMAAO,EAAC;AACrB,MAAM,KAAK,IAAA,wMAAY,EAAC;uCAChB"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/lib/firestore.ts"],"sourcesContent":["import { \r\n  collection, \r\n  addDoc, \r\n  serverTimestamp, \r\n  doc, \r\n  setDoc,\r\n  query,\r\n  where,\r\n  getDocs\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\n\r\n// Collection names\r\nexport const COLLECTIONS = {\r\n  ORGANIZATIONS: 'organizations',\r\n  ORGANIZATION_MEMBERS: 'organization_members',\r\n  PROJECTS: 'projects',\r\n  ENVIRONMENTS: 'environments',\r\n  FEATURE_FLAGS: 'feature_flags',\r\n  FLAG_VALUES: 'flag_values',\r\n  API_KEYS: 'api_keys',\r\n  AUDIT_LOGS: 'audit_logs',\r\n  FLAG_ANALYTICS: 'flag_analytics',\r\n} as const;\r\n\r\n// Organization functions\r\nexport async function createOrganization(data: {\r\n  name: string;\r\n  slug: string;\r\n  createdBy: string;\r\n}) {\r\n  const orgRef = await addDoc(collection(db, COLLECTIONS.ORGANIZATIONS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create owner membership\r\n  await setDoc(doc(db, COLLECTIONS.ORGANIZATION_MEMBERS, `${data.createdBy}_${orgRef.id}`), {\r\n    organizationId: orgRef.id,\r\n    userId: data.createdBy,\r\n    role: 'owner',\r\n    createdAt: serverTimestamp(),\r\n  });\r\n\r\n  return orgRef.id;\r\n}\r\n\r\nexport async function getUserOrganizations(userId: string) {\r\n  const membersQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATION_MEMBERS),\r\n    where('userId', '==', userId)\r\n  );\r\n  \r\n  const membersSnap = await getDocs(membersQuery);\r\n  const orgIds = membersSnap.docs.map(doc => doc.data().organizationId);\r\n  \r\n  if (orgIds.length === 0) return [];\r\n  \r\n  const orgsQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATIONS),\r\n    where('__name__', 'in', orgIds)\r\n  );\r\n  \r\n  const orgsSnap = await getDocs(orgsQuery);\r\n  return orgsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Project functions\r\nexport async function createProject(data: {\r\n  organizationId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  createdBy: string;\r\n}) {\r\n  const projectRef = await addDoc(collection(db, COLLECTIONS.PROJECTS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create default environments\r\n  const environments = [\r\n    { name: 'Development', key: 'dev' },\r\n    { name: 'Staging', key: 'staging' },\r\n    { name: 'Production', key: 'prod' },\r\n  ];\r\n\r\n  for (const env of environments) {\r\n    await addDoc(collection(db, COLLECTIONS.ENVIRONMENTS), {\r\n      projectId: projectRef.id,\r\n      ...env,\r\n      createdAt: serverTimestamp(),\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return projectRef.id;\r\n}\r\n\r\n// Feature flag functions\r\nexport async function createFeatureFlag(data: {\r\n  projectId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  flagType: 'boolean' | 'multivariate' | 'number' | 'json';\r\n  defaultValue: any;\r\n  tags?: string[];\r\n  createdBy: string;\r\n}) {\r\n  // Create the flag\r\n  const flagRef = await addDoc(collection(db, COLLECTIONS.FEATURE_FLAGS), {\r\n    ...data,\r\n    tags: data.tags || [],\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Get all environments for this project\r\n  const envsQuery = query(\r\n    collection(db, COLLECTIONS.ENVIRONMENTS),\r\n    where('projectId', '==', data.projectId)\r\n  );\r\n  const envsSnap = await getDocs(envsQuery);\r\n\r\n  // Create flag_values for each environment\r\n  for (const envDoc of envsSnap.docs) {\r\n    await addDoc(collection(db, COLLECTIONS.FLAG_VALUES), {\r\n      flagId: flagRef.id,\r\n      environmentId: envDoc.id,\r\n      enabled: false,\r\n      value: data.defaultValue,\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return flagRef;\r\n}\r\n\r\n// API Key functions\r\nexport async function createApiKey(data: {\r\n  environmentId: string;\r\n  name: string;\r\n  keyType: 'client' | 'server';\r\n  createdBy: string;\r\n}) {\r\n  const bcrypt = (await import('bcryptjs')).default;\r\n  \r\n  // Generate random key: fsk_{type}_{32-char-random}\r\n  const randomPart = Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n    .map(b => b.toString(16).padStart(2, '0'))\r\n    .join('');\r\n  const rawKey = `fsk_${data.keyType}_${randomPart}`;\r\n  \r\n  // Hash for storage\r\n  const keyHash = await bcrypt.hash(rawKey, 10);\r\n  \r\n  // Prefix for quick lookup (first 12 chars)\r\n  const keyPrefix = rawKey.substring(0, 12);\r\n  \r\n  // Store in Firestore\r\n  await addDoc(collection(db, COLLECTIONS.API_KEYS), {\r\n    environmentId: data.environmentId,\r\n    name: data.name,\r\n    keyPrefix,\r\n    keyHash,\r\n    keyType: data.keyType,\r\n    revoked: false,\r\n    lastUsedAt: null,\r\n    createdAt: serverTimestamp(),\r\n    createdBy: data.createdBy,\r\n  });\r\n  \r\n  // Return raw key (shown ONCE)\r\n  return rawKey;\r\n}\r\n\r\nexport async function revokeApiKey(keyId: string) {\r\n  const keyRef = doc(db, COLLECTIONS.API_KEYS, keyId);\r\n  await updateDoc(keyRef, {\r\n    revoked: true,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getEnvironmentApiKeys(environmentId: string) {\r\n  const q = query(\r\n    collection(db, COLLECTIONS.API_KEYS),\r\n    where('environmentId', '==', environmentId),\r\n    where('revoked', '==', false)\r\n  );\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Audit Log functions (enhanced)\r\nexport async function createAuditLog(data: {\r\n  organizationId?: string;\r\n  projectId?: string;\r\n  environmentId?: string;\r\n  userId: string;\r\n  userEmail?: string;\r\n  action: string;\r\n  targetType?: string;  // kept for backward compatibility\r\n  resourceType: string;\r\n  resourceId: string;\r\n  resourceName?: string;\r\n  changes?: {\r\n    before?: any;\r\n    after?: any;\r\n  };\r\n  metadata?: Record<string, any>;\r\n  ipAddress?: string;\r\n  userAgent?: string;\r\n}) {\r\n  return await addDoc(collection(db, COLLECTIONS.AUDIT_LOGS), {\r\n    ...data,\r\n    timestamp: serverTimestamp(),\r\n    createdAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getAuditLogs(organizationId: string, limit: number = 100) {\r\n  const logsQuery = query(\r\n    collection(db, COLLECTIONS.AUDIT_LOGS),\r\n    where('organizationId', '==', organizationId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(logsQuery);\r\n  const logs = snapshot.docs.map(doc => ({ \r\n    id: doc.id, \r\n    ...doc.data() \r\n  }));\r\n  \r\n  // Sort by timestamp descending (newest first)\r\n  return logs.sort((a: any, b: any) => {\r\n    const aTime = a.timestamp?.toMillis() || a.createdAt?.toMillis() || 0;\r\n    const bTime = b.timestamp?.toMillis() || b.createdAt?.toMillis() || 0;\r\n    return bTime - aTime;\r\n  }).slice(0, limit);\r\n}\r\n\r\n// Analytics functions\r\nexport async function recordFlagEvaluation(data: {\r\n  flagKey: string;\r\n  flagId: string;\r\n  projectId: string;\r\n  environmentId: string;\r\n  userId?: string;\r\n  result: boolean | string | number;\r\n  targetingApplied?: boolean;\r\n}) {\r\n  return await addDoc(collection(db, COLLECTIONS.FLAG_ANALYTICS), {\r\n    ...data,\r\n    timestamp: serverTimestamp(),\r\n    createdAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getFlagAnalytics(projectId: string, environmentId: string, days: number = 7) {\r\n  const analyticsQuery = query(\r\n    collection(db, COLLECTIONS.FLAG_ANALYTICS),\r\n    where('projectId', '==', projectId),\r\n    where('environmentId', '==', environmentId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(analyticsQuery);\r\n  const analytics = snapshot.docs.map(doc => ({ \r\n    id: doc.id, \r\n    ...doc.data() \r\n  }));\r\n  \r\n  // Filter by date range (last N days)\r\n  const cutoffTime = Date.now() - (days * 24 * 60 * 60 * 1000);\r\n  \r\n  return analytics.filter((a: any) => {\r\n    const time = a.timestamp?.toMillis() || a.createdAt?.toMillis() || 0;\r\n    return time >= cutoffTime;\r\n  });\r\n}\r\n\r\nexport async function getAggregatedAnalytics(projectId: string, environmentId: string, days: number = 7) {\r\n  const analytics = await getFlagAnalytics(projectId, environmentId, days);\r\n  \r\n  // Aggregate by flag\r\n  const aggregated: Record<string, any> = {};\r\n  \r\n  analytics.forEach((entry: any) => {\r\n    const key = entry.flagKey;\r\n    \r\n    if (!aggregated[key]) {\r\n      aggregated[key] = {\r\n        flagKey: key,\r\n        flagId: entry.flagId,\r\n        evaluations: 0,\r\n        uniqueUsers: new Set(),\r\n        trueCount: 0,\r\n        falseCount: 0,\r\n        targetingAppliedCount: 0,\r\n      };\r\n    }\r\n    \r\n    aggregated[key].evaluations++;\r\n    \r\n    if (entry.userId) {\r\n      aggregated[key].uniqueUsers.add(entry.userId);\r\n    }\r\n    \r\n    if (entry.result === true) aggregated[key].trueCount++;\r\n    if (entry.result === false) aggregated[key].falseCount++;\r\n    if (entry.targetingApplied) aggregated[key].targetingAppliedCount++;\r\n  });\r\n  \r\n  // Convert Set to count\r\n  return Object.values(aggregated).map((item: any) => ({\r\n    ...item,\r\n    uniqueUsers: item.uniqueUsers.size,\r\n  }));\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/flagship/apps/dashboard/app/dashboard/%5Bslug%5D/projects/%5BprojectKey%5D/analytics/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase';\r\nimport { getAggregatedAnalytics } from '@/lib/firestore';\r\n\r\ninterface FlagAnalytics {\r\n  flagKey: string;\r\n  flagId: string;\r\n  evaluations: number;\r\n  uniqueUsers: number;\r\n  trueCount: number;\r\n  falseCount: number;\r\n  targetingAppliedCount: number;\r\n}\r\n\r\nexport default function AnalyticsPage() {\r\n  const params = useParams();\r\n  const [user, setUser] = useState<any>(null);\r\n  const [analytics, setAnalytics] = useState<FlagAnalytics[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [timeRange, setTimeRange] = useState(7); // days\r\n  const [projectId, setProjectId] = useState<string>('');\r\n  const [environmentId, setEnvironmentId] = useState<string>('');\r\n  const [autoRefresh, setAutoRefresh] = useState(false);\r\n  const [lastUpdated, setLastUpdated] = useState<Date | null>(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadAnalytics();\r\n    }\r\n  }, [user, timeRange]);\r\n\r\n  // Auto-refresh effect\r\n  useEffect(() => {\r\n    if (autoRefresh && user) {\r\n      const interval = setInterval(() => {\r\n        loadAnalytics();\r\n      }, 5000); // Refresh every 5 seconds\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [autoRefresh, user]);\r\n\r\n  // Auto-refresh effect\r\n  useEffect(() => {\r\n    if (autoRefresh && user) {\r\n      const interval = setInterval(() => {\r\n        loadAnalytics();\r\n      }, 5000); // Refresh every 5 seconds\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [autoRefresh, user]);\r\n\r\n  async function loadAnalytics() {\r\n    try {\r\n      setLoading(true);\r\n      // In production, resolve these from params\r\n      const projId = params.projectKey as string;\r\n      const envId = 'production'; // Default to production environment\r\n      \r\n      console.log('üìä Analytics Query:', { projId, envId, slug: params.slug });\r\n      \r\n      setProjectId(projId);\r\n      setEnvironmentId(envId);\r\n      \r\n      const data = await getAggregatedAnalytics(projId, envId, timeRange);\r\n      console.log('üìä Analytics Data:', data);\r\n      setAnalytics(data as FlagAnalytics[]);\r\n      setLastUpdated(new Date());\r\n    } catch (error) {\r\n      console.error('Error loading analytics:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function getUsagePercentage(trueCount: number, falseCount: number) {\r\n    const total = trueCount + falseCount;\r\n    if (total === 0) return 0;\r\n    return Math.round((trueCount / total) * 100);\r\n  }\r\n\r\n  const totalEvaluations = analytics.reduce((sum, item) => sum + item.evaluations, 0);\r\n  const totalUniqueUsers = new Set(analytics.flatMap(() => [])).size; // Simplified\r\n  const avgEvaluationsPerFlag = analytics.length > 0 ? Math.round(totalEvaluations / analytics.length) : 0;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 p-8\">\r\n        <div className=\"max-w-7xl mx-auto\">\r\n          <p className=\"text-gray-500\">Loading analytics...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <Link \r\n                href={`/dashboard/${params.slug}/projects/${params.projectKey}`}\r\n                className=\"text-blue-600 hover:text-blue-700 text-sm mb-2 inline-block\"\r\n              >\r\n                ‚Üê Back to Project\r\n              </Link>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">üìä Analytics Dashboard</h1>\r\n              <p className=\"text-gray-600 mt-2\">\r\n                Flag usage and performance metrics\r\n              </p>\r\n              {lastUpdated && (\r\n                <p className=\"text-sm text-gray-500 mt-1\">\r\n                  Last updated: {lastUpdated.toLocaleTimeString('tr-TR')}\r\n                  {autoRefresh && <span className=\"ml-2 text-green-600\">‚óè Live</span>}\r\n                </p>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"flex gap-2\">\r\n              {/* Refresh Button */}\r\n              <button\r\n                onClick={() => loadAnalytics()}\r\n                disabled={loading}\r\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                üîÑ Refresh\r\n              </button>\r\n              \r\n              {/* Auto-Refresh Toggle */}\r\n              <button\r\n                onClick={() => setAutoRefresh(!autoRefresh)}\r\n                className={`px-4 py-2 rounded-lg font-medium ${\r\n                  autoRefresh \r\n                    ? 'bg-red-600 text-white hover:bg-red-700' \r\n                    : 'bg-green-600 text-white hover:bg-green-700'\r\n                }`}\r\n              >\r\n                {autoRefresh ? '‚è∏Ô∏è Stop Auto-Refresh' : '‚ñ∂Ô∏è Auto-Refresh'}\r\n              </button>\r\n              \r\n              {/* Time Range Filter */}\r\n              <select\r\n                value={timeRange}\r\n                onChange={(e) => setTimeRange(Number(e.target.value))}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg bg-white text-gray-900 focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value={1}>Last 24 hours</option>\r\n                <option value={7}>Last 7 days</option>\r\n                <option value={30}>Last 30 days</option>\r\n                <option value={90}>Last 90 days</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Summary Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Total Evaluations</p>\r\n                <p className=\"text-3xl font-bold text-gray-900 mt-2\">\r\n                  {totalEvaluations.toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-4xl\">üìà</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Active Flags</p>\r\n                <p className=\"text-3xl font-bold text-gray-900 mt-2\">\r\n                  {analytics.length}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-4xl\">üö©</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Avg Evaluations/Flag</p>\r\n                <p className=\"text-3xl font-bold text-gray-900 mt-2\">\r\n                  {avgEvaluationsPerFlag.toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <div className=\"text-4xl\">‚ö°</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Flags Table */}\r\n        {analytics.length === 0 ? (\r\n          <div className=\"bg-white rounded-lg shadow p-8 text-center\">\r\n            <p className=\"text-gray-500\">No analytics data available</p>\r\n            <p className=\"text-sm text-gray-400 mt-2\">\r\n              Data will appear here as your flags are evaluated via the API\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Flag\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Evaluations\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Unique Users\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Enabled %\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Targeting Used\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Distribution\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {analytics\r\n                  .sort((a, b) => b.evaluations - a.evaluations)\r\n                  .map((item) => {\r\n                    const enabledPct = getUsagePercentage(item.trueCount, item.falseCount);\r\n                    const targetingPct = item.evaluations > 0 \r\n                      ? Math.round((item.targetingAppliedCount / item.evaluations) * 100) \r\n                      : 0;\r\n\r\n                    return (\r\n                      <tr key={item.flagKey} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {item.flagKey}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"text-sm text-gray-900\">\r\n                            {item.evaluations.toLocaleString()}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"text-sm text-gray-900\">\r\n                            {item.uniqueUsers.toLocaleString()}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center\">\r\n                            <span className=\"text-sm font-medium text-gray-900\">\r\n                              {enabledPct}%\r\n                            </span>\r\n                            <div className=\"ml-2 w-16 bg-gray-200 rounded-full h-2\">\r\n                              <div\r\n                                className=\"bg-green-500 h-2 rounded-full\"\r\n                                style={{ width: `${enabledPct}%` }}\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                            targetingPct > 0 \r\n                              ? 'bg-blue-100 text-blue-800' \r\n                              : 'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {targetingPct}%\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                          <div className=\"flex gap-2\">\r\n                            <span className=\"text-green-600\">\r\n                              ‚úì {item.trueCount}\r\n                            </span>\r\n                            <span className=\"text-gray-400\">|</span>\r\n                            <span className=\"text-red-600\">\r\n                              ‚úó {item.falseCount}\r\n                            </span>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        {/* Info Box */}\r\n        <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n          <div className=\"flex items-start\">\r\n            <div className=\"text-blue-600 text-xl mr-3\">üí°</div>\r\n            <div className=\"text-sm text-blue-800\">\r\n              <p className=\"font-medium\">Analytics Tracking</p>\r\n              <p className=\"mt-1\">\r\n                Every flag evaluation via the API is tracked here. Use this data to understand which features \r\n                are most used, identify unused flags for cleanup, and monitor targeting rule effectiveness.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}