{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/apps/dashboard/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\r\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\r\n};\r\n\r\n// Initialize Firebase (singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\n\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport default app;\r\n"],"names":[],"mappings":";;;;;;;;AAKU;AALV;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,oOAAO,IAAG,MAAM,KAAK,IAAI,IAAA,0OAAa,EAAC,kBAAkB,IAAA,oOAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,OAAO,IAAA,8NAAO,EAAC;AACrB,MAAM,KAAK,IAAA,wOAAY,EAAC;uCAChB"}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/apps/dashboard/lib/firestore.ts"],"sourcesContent":["import { \r\n  collection, \r\n  addDoc, \r\n  serverTimestamp, \r\n  doc, \r\n  setDoc,\r\n  updateDoc,\r\n  query,\r\n  where,\r\n  getDocs\r\n} from 'firebase/firestore';\r\nimport { db } from './firebase';\r\n\r\n// Collection names\r\nexport const COLLECTIONS = {\r\n  ORGANIZATIONS: 'organizations',\r\n  ORGANIZATION_MEMBERS: 'organization_members',\r\n  PROJECTS: 'projects',\r\n  ENVIRONMENTS: 'environments',\r\n  FEATURE_FLAGS: 'feature_flags',\r\n  FLAG_VALUES: 'flag_values',\r\n  API_KEYS: 'api_keys',\r\n  AUDIT_LOGS: 'audit_logs',\r\n  FLAG_ANALYTICS: 'flag_analytics',\r\n} as const;\r\n\r\n// Organization functions\r\nexport async function createOrganization(data: {\r\n  name: string;\r\n  slug: string;\r\n  createdBy: string;\r\n}) {\r\n  const orgRef = await addDoc(collection(db, COLLECTIONS.ORGANIZATIONS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create owner membership\r\n  await setDoc(doc(db, COLLECTIONS.ORGANIZATION_MEMBERS, `${data.createdBy}_${orgRef.id}`), {\r\n    organizationId: orgRef.id,\r\n    userId: data.createdBy,\r\n    role: 'owner',\r\n    createdAt: serverTimestamp(),\r\n  });\r\n\r\n  return orgRef.id;\r\n}\r\n\r\nexport async function getUserOrganizations(userId: string) {\r\n  const membersQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATION_MEMBERS),\r\n    where('userId', '==', userId)\r\n  );\r\n  \r\n  const membersSnap = await getDocs(membersQuery);\r\n  const orgIds = membersSnap.docs.map(doc => doc.data().organizationId);\r\n  \r\n  if (orgIds.length === 0) return [];\r\n  \r\n  const orgsQuery = query(\r\n    collection(db, COLLECTIONS.ORGANIZATIONS),\r\n    where('__name__', 'in', orgIds)\r\n  );\r\n  \r\n  const orgsSnap = await getDocs(orgsQuery);\r\n  return orgsSnap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Project functions\r\nexport async function createProject(data: {\r\n  organizationId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  createdBy: string;\r\n}) {\r\n  const projectRef = await addDoc(collection(db, COLLECTIONS.PROJECTS), {\r\n    ...data,\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Auto-create default environments\r\n  const environments = [\r\n    { name: 'Development', key: 'dev' },\r\n    { name: 'Staging', key: 'staging' },\r\n    { name: 'Production', key: 'prod' },\r\n  ];\r\n\r\n  for (const env of environments) {\r\n    await addDoc(collection(db, COLLECTIONS.ENVIRONMENTS), {\r\n      projectId: projectRef.id,\r\n      ...env,\r\n      createdAt: serverTimestamp(),\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return projectRef.id;\r\n}\r\n\r\n// Feature flag functions\r\nexport async function createFeatureFlag(data: {\r\n  projectId: string;\r\n  name: string;\r\n  key: string;\r\n  description?: string;\r\n  flagType: 'boolean' | 'multivariate' | 'number' | 'json';\r\n  defaultValue: any;\r\n  tags?: string[];\r\n  createdBy: string;\r\n}) {\r\n  // Create the flag\r\n  const flagRef = await addDoc(collection(db, COLLECTIONS.FEATURE_FLAGS), {\r\n    ...data,\r\n    tags: data.tags || [],\r\n    createdAt: serverTimestamp(),\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n\r\n  // Get all environments for this project\r\n  const envsQuery = query(\r\n    collection(db, COLLECTIONS.ENVIRONMENTS),\r\n    where('projectId', '==', data.projectId)\r\n  );\r\n  const envsSnap = await getDocs(envsQuery);\r\n\r\n  // Create flag_values for each environment\r\n  for (const envDoc of envsSnap.docs) {\r\n    await addDoc(collection(db, COLLECTIONS.FLAG_VALUES), {\r\n      flagId: flagRef.id,\r\n      environmentId: envDoc.id,\r\n      enabled: false,\r\n      value: data.defaultValue,\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n  }\r\n\r\n  return flagRef;\r\n}\r\n\r\n// API Key functions\r\nexport async function createApiKey(data: {\r\n  environmentId: string;\r\n  name: string;\r\n  keyType: 'client' | 'server';\r\n  createdBy: string;\r\n}) {\r\n  const bcrypt = (await import('bcryptjs')).default;\r\n  \r\n  // Generate random key: fsk_{type}_{32-char-random}\r\n  const randomPart = Array.from(crypto.getRandomValues(new Uint8Array(16)))\r\n    .map(b => b.toString(16).padStart(2, '0'))\r\n    .join('');\r\n  const rawKey = `fsk_${data.keyType}_${randomPart}`;\r\n  \r\n  // Hash for storage\r\n  const keyHash = await bcrypt.hash(rawKey, 10);\r\n  \r\n  // Prefix for quick lookup (first 12 chars)\r\n  const keyPrefix = rawKey.substring(0, 12);\r\n  \r\n  // Store in Firestore\r\n  await addDoc(collection(db, COLLECTIONS.API_KEYS), {\r\n    environmentId: data.environmentId,\r\n    name: data.name,\r\n    keyPrefix,\r\n    keyHash,\r\n    keyType: data.keyType,\r\n    revoked: false,\r\n    lastUsedAt: null,\r\n    createdAt: serverTimestamp(),\r\n    createdBy: data.createdBy,\r\n  });\r\n  \r\n  // Return raw key (shown ONCE)\r\n  return rawKey;\r\n}\r\n\r\nexport async function revokeApiKey(keyId: string) {\r\n  const keyRef = doc(db, COLLECTIONS.API_KEYS, keyId);\r\n  await updateDoc(keyRef, {\r\n    revoked: true,\r\n    updatedAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getEnvironmentApiKeys(environmentId: string) {\r\n  const q = query(\r\n    collection(db, COLLECTIONS.API_KEYS),\r\n    where('environmentId', '==', environmentId),\r\n    where('revoked', '==', false)\r\n  );\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n}\r\n\r\n// Audit Log functions (enhanced)\r\nexport async function createAuditLog(data: {\r\n  organizationId?: string;\r\n  projectId?: string;\r\n  environmentId?: string;\r\n  userId: string;\r\n  userEmail?: string;\r\n  action: string;\r\n  targetType?: string;  // kept for backward compatibility\r\n  resourceType: string;\r\n  resourceId: string;\r\n  resourceName?: string;\r\n  changes?: {\r\n    before?: any;\r\n    after?: any;\r\n  };\r\n  metadata?: Record<string, any>;\r\n  ipAddress?: string;\r\n  userAgent?: string;\r\n}) {\r\n  const logRef = await addDoc(collection(db, COLLECTIONS.AUDIT_LOGS), {\r\n    ...data,\r\n    timestamp: serverTimestamp(),\r\n    createdAt: serverTimestamp(),\r\n  });\r\n\r\n  // Trigger webhooks asynchronously (don't await to avoid slowing down audit log creation)\r\n  if (data.projectId && data.action) {\r\n    const { triggerWebhooks } = await import('./webhooks');\r\n    \r\n    // Map audit log actions to webhook events\r\n    const eventMap: Record<string, string> = {\r\n      'FLAG_CREATED': 'flag.created',\r\n      'FLAG_UPDATED': 'flag.updated',\r\n      'FLAG_DELETED': 'flag.deleted',\r\n      'FLAG_TOGGLED': 'flag.toggled',\r\n      'TARGETING_RULES_UPDATED': 'targeting.updated',\r\n    };\r\n\r\n    const event = eventMap[data.action] as any;\r\n    \r\n    if (event) {\r\n      triggerWebhooks(data.projectId, event, {\r\n        flagKey: data.metadata?.flagKey || data.resourceName,\r\n        flagName: data.resourceName,\r\n        action: data.action,\r\n        actor: data.userEmail || 'Unknown',\r\n        changes: data.changes,\r\n        before: data.changes?.before,\r\n        after: data.changes?.after,\r\n      }).catch(err => console.error('Webhook trigger error:', err));\r\n    }\r\n  }\r\n\r\n  return logRef;\r\n}\r\n\r\nexport async function getAuditLogs(organizationId: string, limit: number = 100) {\r\n  const logsQuery = query(\r\n    collection(db, COLLECTIONS.AUDIT_LOGS),\r\n    where('organizationId', '==', organizationId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(logsQuery);\r\n  const logs = snapshot.docs.map(doc => ({ \r\n    id: doc.id, \r\n    ...doc.data() \r\n  }));\r\n  \r\n  // Sort by timestamp descending (newest first)\r\n  return logs.sort((a: any, b: any) => {\r\n    const aTime = a.timestamp?.toMillis() || a.createdAt?.toMillis() || 0;\r\n    const bTime = b.timestamp?.toMillis() || b.createdAt?.toMillis() || 0;\r\n    return bTime - aTime;\r\n  }).slice(0, limit);\r\n}\r\n\r\n// Analytics functions\r\nexport async function recordFlagEvaluation(data: {\r\n  flagKey: string;\r\n  flagId: string;\r\n  projectId: string;\r\n  environmentId: string;\r\n  userId?: string;\r\n  result: boolean | string | number;\r\n  targetingApplied?: boolean;\r\n}) {\r\n  return await addDoc(collection(db, COLLECTIONS.FLAG_ANALYTICS), {\r\n    ...data,\r\n    timestamp: serverTimestamp(),\r\n    createdAt: serverTimestamp(),\r\n  });\r\n}\r\n\r\nexport async function getFlagAnalytics(projectId: string, environmentId: string, days: number = 7) {\r\n  const analyticsQuery = query(\r\n    collection(db, COLLECTIONS.FLAG_ANALYTICS),\r\n    where('projectId', '==', projectId),\r\n    where('environmentId', '==', environmentId)\r\n  );\r\n  \r\n  const snapshot = await getDocs(analyticsQuery);\r\n  const analytics = snapshot.docs.map(doc => ({ \r\n    id: doc.id, \r\n    ...doc.data() \r\n  }));\r\n  \r\n  // Filter by date range (last N days)\r\n  const cutoffTime = Date.now() - (days * 24 * 60 * 60 * 1000);\r\n  \r\n  return analytics.filter((a: any) => {\r\n    const time = a.timestamp?.toMillis() || a.createdAt?.toMillis() || 0;\r\n    return time >= cutoffTime;\r\n  });\r\n}\r\n\r\nexport async function getAggregatedAnalytics(projectId: string, environmentId: string, days: number = 7) {\r\n  const analytics = await getFlagAnalytics(projectId, environmentId, days);\r\n  \r\n  // Aggregate by flag\r\n  const aggregated: Record<string, any> = {};\r\n  \r\n  analytics.forEach((entry: any) => {\r\n    const key = entry.flagKey;\r\n    \r\n    if (!aggregated[key]) {\r\n      aggregated[key] = {\r\n        flagKey: key,\r\n        flagId: entry.flagId,\r\n        evaluations: 0,\r\n        uniqueUsers: new Set(),\r\n        trueCount: 0,\r\n        falseCount: 0,\r\n        targetingAppliedCount: 0,\r\n      };\r\n    }\r\n    \r\n    aggregated[key].evaluations++;\r\n    \r\n    if (entry.userId) {\r\n      aggregated[key].uniqueUsers.add(entry.userId);\r\n    }\r\n    \r\n    if (entry.result === true) aggregated[key].trueCount++;\r\n    if (entry.result === false) aggregated[key].falseCount++;\r\n    if (entry.targetingApplied) aggregated[key].targetingAppliedCount++;\r\n  });\r\n  \r\n  // Convert Set to count\r\n  return Object.values(aggregated).map((item: any) => ({\r\n    ...item,\r\n    uniqueUsers: item.uniqueUsers.size,\r\n  }));\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAWA;;;AAGO,MAAM,cAAc;IACzB,eAAe;IACf,sBAAsB;IACtB,UAAU;IACV,cAAc;IACd,eAAe;IACf,aAAa;IACb,UAAU;IACV,YAAY;IACZ,gBAAgB;AAClB;AAGO,eAAe,mBAAmB,IAIxC;IACC,MAAM,SAAS,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,aAAa,GAAG;QACrE,GAAG,IAAI;QACP,WAAW,IAAA,2OAAe;QAC1B,WAAW,IAAA,2OAAe;IAC5B;IAEA,+BAA+B;IAC/B,MAAM,IAAA,kOAAM,EAAC,IAAA,+NAAG,EAAC,mMAAE,EAAE,YAAY,oBAAoB,EAAE,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,GAAG;QACxF,gBAAgB,OAAO,EAAE;QACzB,QAAQ,KAAK,SAAS;QACtB,MAAM;QACN,WAAW,IAAA,2OAAe;IAC5B;IAEA,OAAO,OAAO,EAAE;AAClB;AAEO,eAAe,qBAAqB,MAAc;IACvD,MAAM,eAAe,IAAA,iOAAK,EACxB,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,oBAAoB,GAC/C,IAAA,iOAAK,EAAC,UAAU,MAAM;IAGxB,MAAM,cAAc,MAAM,IAAA,mOAAO,EAAC;IAClC,MAAM,SAAS,YAAY,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,IAAI,IAAI,GAAG,cAAc;IAEpE,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO,EAAE;IAElC,MAAM,YAAY,IAAA,iOAAK,EACrB,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,aAAa,GACxC,IAAA,iOAAK,EAAC,YAAY,MAAM;IAG1B,MAAM,WAAW,MAAM,IAAA,mOAAO,EAAC;IAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,IAAI,IAAI,EAAE;YAAE,GAAG,IAAI,IAAI,EAAE;QAAC,CAAC;AAChE;AAGO,eAAe,cAAc,IAMnC;IACC,MAAM,aAAa,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,QAAQ,GAAG;QACpE,GAAG,IAAI;QACP,WAAW,IAAA,2OAAe;QAC1B,WAAW,IAAA,2OAAe;IAC5B;IAEA,mCAAmC;IACnC,MAAM,eAAe;QACnB;YAAE,MAAM;YAAe,KAAK;QAAM;QAClC;YAAE,MAAM;YAAW,KAAK;QAAU;QAClC;YAAE,MAAM;YAAc,KAAK;QAAO;KACnC;IAED,KAAK,MAAM,OAAO,aAAc;QAC9B,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,YAAY,GAAG;YACrD,WAAW,WAAW,EAAE;YACxB,GAAG,GAAG;YACN,WAAW,IAAA,2OAAe;YAC1B,WAAW,IAAA,2OAAe;QAC5B;IACF;IAEA,OAAO,WAAW,EAAE;AACtB;AAGO,eAAe,kBAAkB,IASvC;IACC,kBAAkB;IAClB,MAAM,UAAU,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,aAAa,GAAG;QACtE,GAAG,IAAI;QACP,MAAM,KAAK,IAAI,IAAI,EAAE;QACrB,WAAW,IAAA,2OAAe;QAC1B,WAAW,IAAA,2OAAe;IAC5B;IAEA,wCAAwC;IACxC,MAAM,YAAY,IAAA,iOAAK,EACrB,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,YAAY,GACvC,IAAA,iOAAK,EAAC,aAAa,MAAM,KAAK,SAAS;IAEzC,MAAM,WAAW,MAAM,IAAA,mOAAO,EAAC;IAE/B,0CAA0C;IAC1C,KAAK,MAAM,UAAU,SAAS,IAAI,CAAE;QAClC,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,WAAW,GAAG;YACpD,QAAQ,QAAQ,EAAE;YAClB,eAAe,OAAO,EAAE;YACxB,SAAS;YACT,OAAO,KAAK,YAAY;YACxB,WAAW,IAAA,2OAAe;QAC5B;IACF;IAEA,OAAO;AACT;AAGO,eAAe,aAAa,IAKlC;IACC,MAAM,SAAS,CAAC,sJAAwB,EAAE,OAAO;IAEjD,mDAAmD;IACnD,MAAM,aAAa,MAAM,IAAI,CAAC,OAAO,eAAe,CAAC,IAAI,WAAW,MACjE,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MACpC,IAAI,CAAC;IACR,MAAM,SAAS,CAAC,IAAI,EAAE,KAAK,OAAO,CAAC,CAAC,EAAE,YAAY;IAElD,mBAAmB;IACnB,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC,QAAQ;IAE1C,2CAA2C;IAC3C,MAAM,YAAY,OAAO,SAAS,CAAC,GAAG;IAEtC,qBAAqB;IACrB,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,QAAQ,GAAG;QACjD,eAAe,KAAK,aAAa;QACjC,MAAM,KAAK,IAAI;QACf;QACA;QACA,SAAS,KAAK,OAAO;QACrB,SAAS;QACT,YAAY;QACZ,WAAW,IAAA,2OAAe;QAC1B,WAAW,KAAK,SAAS;IAC3B;IAEA,8BAA8B;IAC9B,OAAO;AACT;AAEO,eAAe,aAAa,KAAa;IAC9C,MAAM,SAAS,IAAA,+NAAG,EAAC,mMAAE,EAAE,YAAY,QAAQ,EAAE;IAC7C,MAAM,IAAA,qOAAS,EAAC,QAAQ;QACtB,SAAS;QACT,WAAW,IAAA,2OAAe;IAC5B;AACF;AAEO,eAAe,sBAAsB,aAAqB;IAC/D,MAAM,IAAI,IAAA,iOAAK,EACb,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,QAAQ,GACnC,IAAA,iOAAK,EAAC,iBAAiB,MAAM,gBAC7B,IAAA,iOAAK,EAAC,WAAW,MAAM;IAEzB,MAAM,WAAW,MAAM,IAAA,mOAAO,EAAC;IAC/B,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAAE,IAAI,IAAI,EAAE;YAAE,GAAG,IAAI,IAAI,EAAE;QAAC,CAAC;AAChE;AAGO,eAAe,eAAe,IAkBpC;IACC,MAAM,SAAS,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,UAAU,GAAG;QAClE,GAAG,IAAI;QACP,WAAW,IAAA,2OAAe;QAC1B,WAAW,IAAA,2OAAe;IAC5B;IAEA,yFAAyF;IACzF,IAAI,KAAK,SAAS,IAAI,KAAK,MAAM,EAAE;QACjC,MAAM,EAAE,eAAe,EAAE,GAAG;QAE5B,0CAA0C;QAC1C,MAAM,WAAmC;YACvC,gBAAgB;YAChB,gBAAgB;YAChB,gBAAgB;YAChB,gBAAgB;YAChB,2BAA2B;QAC7B;QAEA,MAAM,QAAQ,QAAQ,CAAC,KAAK,MAAM,CAAC;QAEnC,IAAI,OAAO;YACT,gBAAgB,KAAK,SAAS,EAAE,OAAO;gBACrC,SAAS,KAAK,QAAQ,EAAE,WAAW,KAAK,YAAY;gBACpD,UAAU,KAAK,YAAY;gBAC3B,QAAQ,KAAK,MAAM;gBACnB,OAAO,KAAK,SAAS,IAAI;gBACzB,SAAS,KAAK,OAAO;gBACrB,QAAQ,KAAK,OAAO,EAAE;gBACtB,OAAO,KAAK,OAAO,EAAE;YACvB,GAAG,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,0BAA0B;QAC1D;IACF;IAEA,OAAO;AACT;AAEO,eAAe,aAAa,cAAsB,EAAE,QAAgB,GAAG;IAC5E,MAAM,YAAY,IAAA,iOAAK,EACrB,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,UAAU,GACrC,IAAA,iOAAK,EAAC,kBAAkB,MAAM;IAGhC,MAAM,WAAW,MAAM,IAAA,mOAAO,EAAC;IAC/B,MAAM,OAAO,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YACrC,IAAI,IAAI,EAAE;YACV,GAAG,IAAI,IAAI,EAAE;QACf,CAAC;IAED,8CAA8C;IAC9C,OAAO,KAAK,IAAI,CAAC,CAAC,GAAQ;QACxB,MAAM,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,cAAc;QACpE,MAAM,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,cAAc;QACpE,OAAO,QAAQ;IACjB,GAAG,KAAK,CAAC,GAAG;AACd;AAGO,eAAe,qBAAqB,IAQ1C;IACC,OAAO,MAAM,IAAA,kOAAM,EAAC,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,cAAc,GAAG;QAC9D,GAAG,IAAI;QACP,WAAW,IAAA,2OAAe;QAC1B,WAAW,IAAA,2OAAe;IAC5B;AACF;AAEO,eAAe,iBAAiB,SAAiB,EAAE,aAAqB,EAAE,OAAe,CAAC;IAC/F,MAAM,iBAAiB,IAAA,iOAAK,EAC1B,IAAA,sOAAU,EAAC,mMAAE,EAAE,YAAY,cAAc,GACzC,IAAA,iOAAK,EAAC,aAAa,MAAM,YACzB,IAAA,iOAAK,EAAC,iBAAiB,MAAM;IAG/B,MAAM,WAAW,MAAM,IAAA,mOAAO,EAAC;IAC/B,MAAM,YAAY,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;YAC1C,IAAI,IAAI,EAAE;YACV,GAAG,IAAI,IAAI,EAAE;QACf,CAAC;IAED,qCAAqC;IACrC,MAAM,aAAa,KAAK,GAAG,KAAM,OAAO,KAAK,KAAK,KAAK;IAEvD,OAAO,UAAU,MAAM,CAAC,CAAC;QACvB,MAAM,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,cAAc;QACnE,OAAO,QAAQ;IACjB;AACF;AAEO,eAAe,uBAAuB,SAAiB,EAAE,aAAqB,EAAE,OAAe,CAAC;IACrG,MAAM,YAAY,MAAM,iBAAiB,WAAW,eAAe;IAEnE,oBAAoB;IACpB,MAAM,aAAkC,CAAC;IAEzC,UAAU,OAAO,CAAC,CAAC;QACjB,MAAM,MAAM,MAAM,OAAO;QAEzB,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;YACpB,UAAU,CAAC,IAAI,GAAG;gBAChB,SAAS;gBACT,QAAQ,MAAM,MAAM;gBACpB,aAAa;gBACb,aAAa,IAAI;gBACjB,WAAW;gBACX,YAAY;gBACZ,uBAAuB;YACzB;QACF;QAEA,UAAU,CAAC,IAAI,CAAC,WAAW;QAE3B,IAAI,MAAM,MAAM,EAAE;YAChB,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,MAAM;QAC9C;QAEA,IAAI,MAAM,MAAM,KAAK,MAAM,UAAU,CAAC,IAAI,CAAC,SAAS;QACpD,IAAI,MAAM,MAAM,KAAK,OAAO,UAAU,CAAC,IAAI,CAAC,UAAU;QACtD,IAAI,MAAM,gBAAgB,EAAE,UAAU,CAAC,IAAI,CAAC,qBAAqB;IACnE;IAEA,uBAAuB;IACvB,OAAO,OAAO,MAAM,CAAC,YAAY,GAAG,CAAC,CAAC,OAAc,CAAC;YACnD,GAAG,IAAI;YACP,aAAa,KAAK,WAAW,CAAC,IAAI;QACpC,CAAC;AACH"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/tr/Desktop/Proje%20Klos%C3%B6r%C3%BC/React/flagship/apps/dashboard/app/dashboard/%5Bslug%5D/projects/%5BprojectKey%5D/flags/%5BflagKey%5D/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport { doc, getDoc, collection, query, where, getDocs, updateDoc } from 'firebase/firestore';\r\nimport { db } from '@/lib/firebase';\r\nimport { COLLECTIONS, createAuditLog } from '@/lib/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase';\r\nimport toast from 'react-hot-toast';\r\nimport { fadeIn, slideInBottom, staggerFadeIn, scaleIn, cardHover, cardHoverEnd } from '@/lib/animations';\r\n\r\ninterface TargetingCondition {\r\n  attribute: string;\r\n  operator: 'eq' | 'ne' | 'contains' | 'in' | 'gt' | 'lt' | 'gte' | 'lte';\r\n  value: any;\r\n}\r\n\r\ninterface TargetingRule {\r\n  id: string;\r\n  description: string;\r\n  conditions: TargetingCondition[];\r\n  rolloutPercentage: number;\r\n  value: any;\r\n  enabled: boolean;\r\n}\r\n\r\ninterface Targeting {\r\n  enabled: boolean;\r\n  rules: TargetingRule[];\r\n  defaultRule: {\r\n    rolloutPercentage: number;\r\n    value: any;\r\n  };\r\n}\r\n\r\nexport default function FlagDetailPage() {\r\n  const params = useParams();\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<any>(null);\r\n  const [flag, setFlag] = useState<any>(null);\r\n  const [environments, setEnvironments] = useState<any[]>([]);\r\n  const [selectedEnv, setSelectedEnv] = useState<string>('');\r\n  const [flagValue, setFlagValue] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<'settings' | 'targeting'>('settings');\r\n  const [targeting, setTargeting] = useState<Targeting>({\r\n    enabled: false,\r\n    rules: [],\r\n    defaultRule: {\r\n      rolloutPercentage: 100,\r\n      value: true\r\n    }\r\n  });\r\n\r\n  // Animation refs\r\n  const headerRef = useRef<HTMLDivElement>(null);\r\n  const tabsRef = useRef<HTMLDivElement>(null);\r\n  const contentRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (flag) {\r\n      document.title = `${flag.name} | Flagship`;\r\n    }\r\n  }, [flag]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [params.flagKey]);\r\n\r\n  useEffect(() => {\r\n    if (selectedEnv && flag) {\r\n      loadFlagValue();\r\n    }\r\n  }, [selectedEnv, flag]);\r\n\r\n  async function loadData() {\r\n    try {\r\n      // Get flag\r\n      const flagsQuery = query(\r\n        collection(db, COLLECTIONS.FEATURE_FLAGS),\r\n        where('key', '==', params.flagKey as string)\r\n      );\r\n      const flagSnapshot = await getDocs(flagsQuery);\r\n      \r\n      if (flagSnapshot.empty) {\r\n        router.push(`/dashboard/${params.slug}/projects/${params.projectKey}`);\r\n        return;\r\n      }\r\n\r\n      const flagDoc = flagSnapshot.docs[0];\r\n      setFlag({ id: flagDoc.id, ...flagDoc.data() });\r\n\r\n      // Get environments\r\n      const envsQuery = query(\r\n        collection(db, COLLECTIONS.ENVIRONMENTS)\r\n      );\r\n      const envsSnapshot = await getDocs(envsQuery);\r\n      const envs = envsSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n      setEnvironments(envs);\r\n      \r\n      if (envs.length > 0) {\r\n        setSelectedEnv(envs[0].id);\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error loading flag:', error);\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function loadFlagValue() {\r\n    try {\r\n      const valuesQuery = query(\r\n        collection(db, COLLECTIONS.FLAG_VALUES),\r\n        where('flagId', '==', flag.id),\r\n        where('environmentId', '==', selectedEnv)\r\n      );\r\n      const valuesSnapshot = await getDocs(valuesQuery);\r\n      \r\n      if (!valuesSnapshot.empty) {\r\n        const value = valuesSnapshot.docs[0];\r\n        const data = { id: value.id, ...value.data() } as any;\r\n        setFlagValue(data);\r\n        \r\n        // Load targeting if exists\r\n        if (data.targeting) {\r\n          setTargeting(data.targeting);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading flag value:', error);\r\n    }\r\n  }\r\n\r\n  async function handleToggle() {\r\n    if (!flagValue) return;\r\n    \r\n    try {\r\n      const newEnabled = !flagValue.enabled;\r\n      await updateDoc(doc(db, COLLECTIONS.FLAG_VALUES, flagValue.id), {\r\n        enabled: newEnabled,\r\n        updatedAt: new Date(),\r\n      });\r\n      \r\n      setFlagValue({ ...flagValue, enabled: newEnabled });\r\n    } catch (error) {\r\n      console.error('Error toggling flag:', error);\r\n      alert('Failed to toggle flag');\r\n    }\r\n  }\r\n\r\n  async function saveTargeting() {\r\n    if (!flagValue || !user || !flag) return;\r\n    \r\n    try {\r\n      const oldTargeting = flagValue.targeting;\r\n      \r\n      await updateDoc(doc(db, COLLECTIONS.FLAG_VALUES, flagValue.id), {\r\n        targeting: targeting,\r\n        updatedAt: new Date(),\r\n      });\r\n      \r\n      // Create audit log\r\n      await createAuditLog({\r\n        organizationId: flag.organizationId || '',\r\n        projectId: flag.projectId,\r\n        environmentId: selectedEnv,\r\n        userId: user.uid,\r\n        userEmail: user.email || 'unknown',\r\n        action: 'TARGETING_RULES_UPDATED',\r\n        resourceType: 'flag',\r\n        resourceId: flag.id,\r\n        resourceName: flag.name,\r\n        changes: {\r\n          before: oldTargeting,\r\n          after: targeting\r\n        }\r\n      });\r\n      \r\n      toast.success('‚úÖ Targeting rules saved successfully!');\r\n    } catch (error) {\r\n      console.error('Error saving targeting:', error);\r\n      toast.error('‚ùå Failed to save targeting rules');\r\n    }\r\n  }\r\n\r\n  function addRule() {\r\n    const newRule: TargetingRule = {\r\n      id: `rule-${Date.now()}`,\r\n      description: 'New rule',\r\n      conditions: [],\r\n      rolloutPercentage: 100,\r\n      value: true,\r\n      enabled: true\r\n    };\r\n    \r\n    setTargeting({\r\n      ...targeting,\r\n      rules: [...targeting.rules, newRule]\r\n    });\r\n  }\r\n\r\n  function removeRule(ruleId: string) {\r\n    setTargeting({\r\n      ...targeting,\r\n      rules: targeting.rules.filter(r => r.id !== ruleId)\r\n    });\r\n  }\r\n\r\n  function updateRule(ruleId: string, updates: Partial<TargetingRule>) {\r\n    setTargeting({\r\n      ...targeting,\r\n      rules: targeting.rules.map(r => \r\n        r.id === ruleId ? { ...r, ...updates } : r\r\n      )\r\n    });\r\n  }\r\n\r\n  function addCondition(ruleId: string) {\r\n    const newCondition: TargetingCondition = {\r\n      attribute: 'plan',\r\n      operator: 'eq',\r\n      value: ''\r\n    };\r\n    \r\n    setTargeting({\r\n      ...targeting,\r\n      rules: targeting.rules.map(r => \r\n        r.id === ruleId \r\n          ? { ...r, conditions: [...r.conditions, newCondition] }\r\n          : r\r\n      )\r\n    });\r\n  }\r\n\r\n  function updateCondition(ruleId: string, conditionIndex: number, updates: Partial<TargetingCondition>) {\r\n    setTargeting({\r\n      ...targeting,\r\n      rules: targeting.rules.map(r => \r\n        r.id === ruleId\r\n          ? {\r\n              ...r,\r\n              conditions: r.conditions.map((c, i) => \r\n                i === conditionIndex ? { ...c, ...updates } : c\r\n              )\r\n            }\r\n          : r\r\n      )\r\n    });\r\n  }\r\n\r\n  function removeCondition(ruleId: string, conditionIndex: number) {\r\n    setTargeting({\r\n      ...targeting,\r\n      rules: targeting.rules.map(r => \r\n        r.id === ruleId\r\n          ? { ...r, conditions: r.conditions.filter((_, i) => i !== conditionIndex) }\r\n          : r\r\n      )\r\n    });\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-16 h-16 mx-auto mb-4 border-4 border-[#0066FF] border-t-transparent rounded-full animate-spin\"></div>\r\n          <p className=\"text-gray-600 font-medium\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!flag) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\r\n      {/* Modern Top Navigation */}\r\n      <nav className=\"bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200 sticky top-0 z-50\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between items-center h-16\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <button\r\n                onClick={() => router.push(`/dashboard/${params.slug}/projects/${params.projectKey}`)}\r\n                className=\"flex items-center space-x-2 text-gray-600 hover:text-[#0066FF] transition-colors\"\r\n              >\r\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                </svg>\r\n                <span className=\"font-medium\">Back to Project</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"px-3 py-1.5 bg-gradient-to-r from-[#0066FF]/10 to-[#00B8D4]/10 rounded-lg\">\r\n                <span className=\"text-xs font-medium text-gray-700\">Flag Details</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\r\n        {/* Header Card */}\r\n        <div className=\"mb-8 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] rounded-2xl shadow-xl text-white p-8\">\r\n          <div className=\"flex items-start justify-between\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center\">\r\n                  <span className=\"text-2xl\">üö©</span>\r\n                </div>\r\n                <div>\r\n                  <h1 className=\"text-3xl sm:text-4xl font-bold\">{flag.name}</h1>\r\n                  <p className=\"text-white/80 text-sm mt-1\">Feature Flag Configuration</p>\r\n                </div>\r\n              </div>\r\n              <p className=\"text-white/90 mt-4 text-lg\">{flag.description || 'No description provided'}</p>\r\n              <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                <span className=\"px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg text-sm font-medium flex items-center space-x-2\">\r\n                  <span>üîë</span>\r\n                  <span>{flag.key}</span>\r\n                </span>\r\n                <span className=\"px-4 py-2 bg-white/20 backdrop-blur-sm text-white rounded-lg text-sm font-medium flex items-center space-x-2\">\r\n                  <span>üìù</span>\r\n                  <span className=\"capitalize\">{flag.flagType}</span>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Environment Selector */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white rounded-xl shadow-md p-6 border border-gray-100\">\r\n            <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\r\n              Select Environment\r\n            </label>\r\n            <select\r\n              value={selectedEnv}\r\n              onChange={(e) => setSelectedEnv(e.target.value)}\r\n              className=\"w-full sm:w-auto px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all text-gray-900 font-medium\"\r\n            >\r\n              {environments.map(env => (\r\n                <option key={env.id} value={env.id}>\r\n                  {env.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white rounded-xl shadow-md p-2 border border-gray-100\">\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => setActiveTab('settings')}\r\n                className={`flex-1 px-6 py-3 font-semibold rounded-lg transition-all duration-300 transform ${\r\n                  activeTab === 'settings'\r\n                    ? 'bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white shadow-lg scale-105'\r\n                    : 'bg-gray-50 text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n              >\r\n                ‚öôÔ∏è Settings\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveTab('targeting')}\r\n                className={`flex-1 px-6 py-3 font-semibold rounded-lg transition-all duration-300 transform ${\r\n                  activeTab === 'targeting'\r\n                    ? 'bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white shadow-lg scale-105'\r\n                    : 'bg-gray-50 text-gray-600 hover:bg-gray-100'\r\n                }`}\r\n              >\r\n                üéØ Targeting Rules\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Settings Tab */}\r\n        {activeTab === 'settings' && (\r\n          <div className=\"space-y-6\">\r\n            {/* Flag Status Card */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-8 border border-gray-100\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-gray-900 flex items-center space-x-2\">\r\n                    <span>‚ö°</span>\r\n                    <span>Flag Status</span>\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Enable or disable this feature flag</p>\r\n                </div>\r\n                <button\r\n                  onClick={handleToggle}\r\n                  className={`relative inline-flex h-10 w-20 items-center rounded-full transition-all duration-300 transform hover:scale-110 shadow-lg ${\r\n                    flagValue?.enabled \r\n                      ? 'bg-gradient-to-r from-green-500 to-green-600 shadow-green-500/40' \r\n                      : 'bg-gray-300 shadow-gray-300/40'\r\n                  }`}\r\n                >\r\n                  <span\r\n                    className={`inline-block h-8 w-8 transform rounded-full bg-white shadow-lg transition-transform duration-300 ${\r\n                      flagValue?.enabled ? 'translate-x-11' : 'translate-x-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n              \r\n              <div className={`p-4 rounded-lg ${\r\n                flagValue?.enabled \r\n                  ? 'bg-gradient-to-r from-green-50 to-green-100 border border-green-200' \r\n                  : 'bg-gray-50 border border-gray-200'\r\n              }`}>\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`w-3 h-3 rounded-full ${\r\n                    flagValue?.enabled ? 'bg-green-500 animate-pulse' : 'bg-gray-400'\r\n                  }`}></div>\r\n                  <span className={`font-semibold ${\r\n                    flagValue?.enabled ? 'text-green-700' : 'text-gray-600'\r\n                  }`}>\r\n                    {flagValue?.enabled ? 'Flag is Active' : 'Flag is Inactive'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Flag Value Card */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-8 border border-gray-100\">\r\n              <div className=\"mb-6\">\r\n                <h3 className=\"text-xl font-bold text-gray-900 flex items-center space-x-2\">\r\n                  <span>üìä</span>\r\n                  <span>Current Value</span>\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 mt-1\">The value returned when this flag is evaluated</p>\r\n              </div>\r\n              \r\n              <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 p-6 rounded-xl\">\r\n                <pre className=\"text-sm text-gray-800 font-mono overflow-x-auto\">\r\n                  {JSON.stringify(flagValue?.value, null, 2)}\r\n                </pre>\r\n              </div>\r\n\r\n              <div className=\"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4\">\r\n                <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200\">\r\n                  <p className=\"text-xs text-blue-600 font-medium mb-1\">Type</p>\r\n                  <p className=\"text-lg font-bold text-blue-900 capitalize\">{flag.flagType}</p>\r\n                </div>\r\n                <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200\">\r\n                  <p className=\"text-xs text-purple-600 font-medium mb-1\">Environment</p>\r\n                  <p className=\"text-lg font-bold text-purple-900\">\r\n                    {environments.find(e => e.id === selectedEnv)?.name || 'Unknown'}\r\n                  </p>\r\n                </div>\r\n                <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200\">\r\n                  <p className=\"text-xs text-orange-600 font-medium mb-1\">Status</p>\r\n                  <p className=\"text-lg font-bold text-orange-900\">\r\n                    {flagValue?.enabled ? 'Enabled' : 'Disabled'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Targeting Tab */}\r\n        {activeTab === 'targeting' && (\r\n          <div className=\"space-y-6\">\r\n            {/* Enable Targeting Card */}\r\n            <div className=\"bg-white rounded-xl shadow-md p-8 border border-gray-100\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold text-gray-900 flex items-center space-x-2\">\r\n                    <span>üéØ</span>\r\n                    <span>Enable Targeting</span>\r\n                  </h3>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">Use rules to target specific users and segments</p>\r\n                </div>\r\n                <button\r\n                  onClick={() => setTargeting({ ...targeting, enabled: !targeting.enabled })}\r\n                  className={`relative inline-flex h-10 w-20 items-center rounded-full transition-all duration-300 transform hover:scale-110 shadow-lg ${\r\n                    targeting.enabled \r\n                      ? 'bg-gradient-to-r from-green-500 to-green-600 shadow-green-500/40' \r\n                      : 'bg-gray-300 shadow-gray-300/40'\r\n                  }`}\r\n                >\r\n                  <span\r\n                    className={`inline-block h-8 w-8 transform rounded-full bg-white shadow-lg transition-transform duration-300 ${\r\n                      targeting.enabled ? 'translate-x-11' : 'translate-x-1'\r\n                    }`}\r\n                  />\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {targeting.enabled && (\r\n              <>\r\n                {/* Rules Section */}\r\n                <div className=\"bg-white rounded-xl shadow-md p-8 border border-gray-100\">\r\n                  <div className=\"flex items-center justify-between mb-6\">\r\n                    <div>\r\n                      <h3 className=\"text-xl font-bold text-gray-900 flex items-center space-x-2\">\r\n                        <span>üìã</span>\r\n                        <span>Targeting Rules</span>\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-600 mt-1\">Define conditions for user targeting</p>\r\n                    </div>\r\n                    <button\r\n                      onClick={addRule}\r\n                      className=\"px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold transition-all duration-300 transform hover:scale-105\"\r\n                    >\r\n                      + Add Rule\r\n                    </button>\r\n                  </div>\r\n\r\n                  {targeting.rules.length === 0 ? (\r\n                    <div className=\"text-center py-16\">\r\n                      <div className=\"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center\">\r\n                        <span className=\"text-4xl\">üéØ</span>\r\n                      </div>\r\n                      <h4 className=\"text-lg font-bold text-gray-900 mb-2\">No targeting rules yet</h4>\r\n                      <p className=\"text-gray-600 mb-6\">Add a rule to start targeting specific users or segments</p>\r\n                      <button\r\n                        onClick={addRule}\r\n                        className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#0066FF] to-[#00B8D4] text-white rounded-lg hover:shadow-lg hover:shadow-[#0066FF]/40 font-semibold transition-all duration-300 transform hover:scale-105\"\r\n                      >\r\n                        + Create Your First Rule\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"space-y-6\">\r\n                      {targeting.rules.map((rule, ruleIndex) => (\r\n                        <div key={rule.id} className=\"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-gray-200 rounded-xl p-6 space-y-5 hover:border-[#0066FF]/30 transition-all\">\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1 space-y-5\">\r\n                              {/* Rule Description */}\r\n                              <div>\r\n                                <label className=\"block text-xs font-semibold text-gray-700 mb-2\">\r\n                                  Rule Description\r\n                                </label>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={rule.description}\r\n                                  onChange={(e) => updateRule(rule.id, { description: e.target.value })}\r\n                                  placeholder=\"e.g., Premium users rule\"\r\n                                  className=\"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all font-medium\"\r\n                                />\r\n                              </div>\r\n\r\n                              {/* Conditions */}\r\n                              <div className=\"space-y-3\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <label className=\"text-sm font-bold text-gray-900 flex items-center space-x-2\">\r\n                                    <span>üîß</span>\r\n                                    <span>Conditions (ALL must match)</span>\r\n                                  </label>\r\n                                  <button\r\n                                    onClick={() => addCondition(rule.id)}\r\n                                    className=\"text-sm text-[#0066FF] hover:text-[#00B8D4] font-semibold transition-colors\"\r\n                                  >\r\n                                    + Add Condition\r\n                                  </button>\r\n                                </div>\r\n\r\n                                {rule.conditions.map((condition, condIndex) => (\r\n                                  <div key={condIndex} className=\"flex gap-2 items-center bg-white p-4 rounded-lg border-2 border-gray-200 hover:border-[#0066FF]/30 transition-all\">\r\n                                    <input\r\n                                      type=\"text\"\r\n                                      value={condition.attribute}\r\n                                      onChange={(e) => updateCondition(rule.id, condIndex, { attribute: e.target.value })}\r\n                                      placeholder=\"attribute (e.g., plan)\"\r\n                                      className=\"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] font-medium\"\r\n                                    />\r\n                                    <select\r\n                                      value={condition.operator}\r\n                                      onChange={(e) => updateCondition(rule.id, condIndex, { operator: e.target.value as any })}\r\n                                      className=\"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] font-medium\"\r\n                                    >\r\n                                      <option value=\"eq\">equals</option>\r\n                                      <option value=\"ne\">not equals</option>\r\n                                      <option value=\"contains\">contains</option>\r\n                                      <option value=\"in\">in</option>\r\n                                      <option value=\"gt\">greater than</option>\r\n                                      <option value=\"lt\">less than</option>\r\n                                      <option value=\"gte\">‚â•</option>\r\n                                      <option value=\"lte\">‚â§</option>\r\n                                    </select>\r\n                                    <input\r\n                                      type=\"text\"\r\n                                      value={condition.value}\r\n                                      onChange={(e) => updateCondition(rule.id, condIndex, { value: e.target.value })}\r\n                                      placeholder=\"value\"\r\n                                      className=\"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] font-medium\"\r\n                                    />\r\n                                    <button\r\n                                      onClick={() => removeCondition(rule.id, condIndex)}\r\n                                      className=\"w-8 h-8 flex items-center justify-center text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                    >\r\n                                      <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                                      </svg>\r\n                                    </button>\r\n                                  </div>\r\n                                ))}\r\n                              </div>\r\n\r\n                              {/* Rollout Percentage */}\r\n                              <div className=\"bg-white p-5 rounded-lg border-2 border-gray-200\">\r\n                                <label className=\"flex text-sm font-bold text-gray-900 mb-3 items-center justify-between\">\r\n                                  <span className=\"flex items-center space-x-2\">\r\n                                    <span>üìä</span>\r\n                                    <span>Rollout Percentage</span>\r\n                                  </span>\r\n                                  <span className=\"text-2xl font-bold text-[#0066FF]\">{rule.rolloutPercentage}%</span>\r\n                                </label>\r\n                                <input\r\n                                  type=\"range\"\r\n                                  min=\"0\"\r\n                                  max=\"100\"\r\n                                  value={rule.rolloutPercentage}\r\n                                  onChange={(e) => updateRule(rule.id, { rolloutPercentage: parseInt(e.target.value) })}\r\n                                  className=\"w-full h-3 bg-gradient-to-r from-gray-200 via-[#0066FF]/30 to-[#00B8D4]/30 rounded-lg appearance-none cursor-pointer\"\r\n                                  style={{\r\n                                    background: `linear-gradient(to right, #0066FF 0%, #00B8D4 ${rule.rolloutPercentage}%, #e5e7eb ${rule.rolloutPercentage}%, #e5e7eb 100%)`\r\n                                  }}\r\n                                />\r\n                              </div>\r\n\r\n                              {/* Rule Value */}\r\n                              <div>\r\n                                <label className=\"flex text-sm font-bold text-gray-900 mb-2 items-center space-x-2\">\r\n                                  <span>üíé</span>\r\n                                  <span>Return Value</span>\r\n                                </label>\r\n                                <input\r\n                                  type=\"text\"\r\n                                  value={JSON.stringify(rule.value)}\r\n                                  onChange={(e) => {\r\n                                    try {\r\n                                      updateRule(rule.id, { value: JSON.parse(e.target.value) });\r\n                                    } catch {}\r\n                                  }}\r\n                                  className=\"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg text-sm font-mono text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n\r\n                            <button\r\n                              onClick={() => removeRule(rule.id)}\r\n                              className=\"ml-4 w-10 h-10 flex items-center justify-center text-red-600 hover:bg-red-50 rounded-lg transition-colors shrink-0\">\r\n                              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                              </svg>\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Default Rule Section */}\r\n                <div className=\"bg-white rounded-xl shadow-md p-8 border border-gray-100\">\r\n                  <div className=\"mb-6\">\r\n                    <h3 className=\"text-xl font-bold text-gray-900 flex items-center space-x-2\">\r\n                      <span>‚öôÔ∏è</span>\r\n                      <span>Default Rule</span>\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      Applied when no targeting rules match\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-5\">\r\n                    {/* Default Rollout */}\r\n                    <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-lg border-2 border-gray-200\">\r\n                      <label className=\"flex text-sm font-bold text-gray-900 mb-3 items-center justify-between\">\r\n                        <span className=\"flex items-center space-x-2\">\r\n                          <span>üìä</span>\r\n                          <span>Default Rollout</span>\r\n                        </span>\r\n                        <span className=\"text-2xl font-bold text-[#0066FF]\">{targeting.defaultRule.rolloutPercentage}%</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"range\"\r\n                        min=\"0\"\r\n                        max=\"100\"\r\n                        value={targeting.defaultRule.rolloutPercentage}\r\n                        onChange={(e) => setTargeting({\r\n                          ...targeting,\r\n                          defaultRule: {\r\n                            ...targeting.defaultRule,\r\n                            rolloutPercentage: parseInt(e.target.value)\r\n                          }\r\n                        })}\r\n                        className=\"w-full h-3 rounded-lg appearance-none cursor-pointer\"\r\n                        style={{\r\n                          background: `linear-gradient(to right, #0066FF 0%, #00B8D4 ${targeting.defaultRule.rolloutPercentage}%, #e5e7eb ${targeting.defaultRule.rolloutPercentage}%, #e5e7eb 100%)`\r\n                        }}\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Default Value */}\r\n                    <div>\r\n                      <label className=\"flex text-sm font-bold text-gray-900 mb-2 items-center space-x-2\">\r\n                        <span>üíé</span>\r\n                        <span>Default Value</span>\r\n                      </label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={JSON.stringify(targeting.defaultRule.value)}\r\n                        onChange={(e) => {\r\n                          try {\r\n                            setTargeting({\r\n                              ...targeting,\r\n                              defaultRule: {\r\n                                ...targeting.defaultRule,\r\n                                value: JSON.parse(e.target.value)\r\n                              }\r\n                            });\r\n                          } catch {}\r\n                        }}\r\n                        className=\"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-lg font-mono text-gray-900 focus:outline-none focus:ring-2 focus:ring-[#0066FF] focus:border-transparent transition-all\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Save Button */}\r\n                <button\r\n                  onClick={saveTargeting}\r\n                  className=\"w-full py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:shadow-xl hover:shadow-green-500/40 font-bold text-lg transition-all duration-300 transform hover:scale-[1.02] flex items-center justify-center space-x-2\"\r\n                >\r\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                  </svg>\r\n                  <span>Save Targeting Rules</span>\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}